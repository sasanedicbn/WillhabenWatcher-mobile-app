{"file_contents":{"components/ErrorBoundary.tsx":{"content":"import React, { Component, ComponentType, PropsWithChildren } from \"react\";\nimport { ErrorFallback, ErrorFallbackProps } from \"@/components/ErrorFallback\";\n\nexport type ErrorBoundaryProps = PropsWithChildren<{\n  FallbackComponent?: ComponentType<ErrorFallbackProps>;\n  onError?: (error: Error, stackTrace: string) => void;\n}>;\n\ntype ErrorBoundaryState = { error: Error | null };\n\n/**\n * This is a special case for for using the class components. Error boundaries must be class components because React only provides error boundary functionality through lifecycle methods (componentDidCatch and getDerivedStateFromError) which are not available in functional components.\n * https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary\n */\n\nexport class ErrorBoundary extends Component<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state: ErrorBoundaryState = { error: null };\n\n  static defaultProps: {\n    FallbackComponent: ComponentType<ErrorFallbackProps>;\n  } = {\n    FallbackComponent: ErrorFallback,\n  };\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { error };\n  }\n\n  componentDidCatch(error: Error, info: { componentStack: string }): void {\n    if (typeof this.props.onError === \"function\") {\n      this.props.onError(error, info.componentStack);\n    }\n  }\n\n  resetError = (): void => {\n    this.setState({ error: null });\n  };\n\n  render() {\n    const { FallbackComponent } = this.props;\n\n    return this.state.error && FallbackComponent ? (\n      <FallbackComponent\n        error={this.state.error}\n        resetError={this.resetError}\n      />\n    ) : (\n      this.props.children\n    );\n  }\n}\n","path":null,"size_bytes":1674,"size_tokens":null},"components/HeaderTitle.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Image } from \"react-native\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Spacing } from \"@/constants/theme\";\n\ninterface HeaderTitleProps {\n  title: string;\n}\n\nexport function HeaderTitle({ title }: HeaderTitleProps) {\n  return (\n    <View style={styles.container}>\n      <Image\n        source={require(\"../assets/images/icon.png\")}\n        style={styles.icon}\n        resizeMode=\"contain\"\n      />\n      <ThemedText style={styles.title}>{title}</ThemedText>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  icon: {\n    width: 28,\n    height: 28,\n    marginRight: Spacing.sm,\n    borderRadius: 6,\n  },\n  title: {\n    fontSize: 17,\n    fontWeight: \"600\",\n  },\n});\n","path":null,"size_bytes":846,"size_tokens":null},"hooks/useScreenInsets.ts":{"content":"import { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { useHeaderHeight } from \"@react-navigation/elements\";\n\nimport { Spacing } from \"@/constants/theme\";\n\nexport function useScreenInsets() {\n  const insets = useSafeAreaInsets();\n  const headerHeight = useHeaderHeight();\n\n  return {\n    paddingTop: headerHeight + Spacing.xl,\n    paddingBottom: insets.bottom + Spacing.xl,\n    scrollInsetBottom: insets.bottom + 16,\n  };\n}\n","path":null,"size_bytes":445,"size_tokens":null},"replit.md":{"content":"# Willhaben Cars - React Native Expo App\n\n## Overview\nA React Native Expo mobile application for browsing car listings from Willhaben (Austria). The app displays vehicle cards with images, prices, and specifications, allowing users to interact with listings through Google search, Willhaben deep links, and phone calls.\n\n## Current State\n- **Version**: 1.0.0\n- **Last Updated**: December 1, 2025\n- **Status**: MVP Complete\n\n## Features\n1. **Vehicle List Screen**\n   - Scrollable list of vehicle cards sorted by newest\n   - Each card shows: image, title, year, mileage, price\n   - Message and chat action icons\n\n2. **Navigation Bar**\n   - \"Logout\" button (displays alert - no auth)\n   - Headphone icon for phone calls\n   - Radio toggle to enable/disable call mode\n\n3. **Card Interactions**\n   - Tap image: Opens Google search for vehicle + location + \"kontakt\"\n   - Tap card body: Navigates to Details screen\n   - Tap message/chat icons: Opens Willhaben app (deep link) or web fallback\n\n4. **Details Screen**\n   - Full vehicle specifications\n   - Price card with primary color styling\n   - Similar vehicles horizontal scroll list\n   - Each similar vehicle links to Willhaben\n\n5. **Phone Call Feature**\n   - When radio mode is ON and vehicle has phone number\n   - Headphone icon triggers phone call via `tel:` link\n\n## Project Architecture\n\n### File Structure\n```\n/\n├── App.tsx                 # Root component with providers\n├── app.json               # Expo configuration\n├── components/\n│   ├── VehicleCard.tsx    # Main vehicle card component\n│   ├── SimilarVehicleCard.tsx  # Mini card for similar vehicles\n│   ├── HeaderTitle.tsx    # Custom header with app icon\n│   ├── ErrorBoundary.tsx  # Error handling wrapper\n│   └── ...                # Shared components\n├── context/\n│   ├── RadioModeContext.tsx   # Phone call mode state\n│   └── PhoneContext.tsx       # Current phone number state\n├── data/\n│   └── mockVehicles.ts    # Mock vehicle data\n├── navigation/\n│   ├── RootStackNavigator.tsx  # Main stack navigator\n│   └── screenOptions.ts       # Shared screen options\n├── screens/\n│   ├── HomeScreen.tsx     # Vehicle list\n│   └── DetailsScreen.tsx  # Vehicle details\n├── constants/\n│   └── theme.ts           # Colors, spacing, typography\n└── hooks/\n    ├── useScreenInsets.ts # Safe area handling\n    └── useTheme.ts        # Theme hook\n```\n\n### Navigation\n- Stack-based navigation (no tab bar)\n- Two screens: Home and Details\n- Transparent header on Home screen\n- Standard header on Details screen\n\n### State Management\n- React Context for radio mode and phone number\n- Local state for vehicle data loading\n- No external state management library\n\n### Styling\n- Custom theme in `constants/theme.ts`\n- Primary color: #1E40AF (deep blue)\n- Success color: #10B981 (green for toggle)\n- Consistent border radius and spacing\n\n## User Preferences\n- No authentication required (personal use app)\n- Mock data API (ready for real API integration)\n- Austrian locale formatting (EUR currency, German dates)\n\n## Recent Changes\n- December 1, 2025: Initial MVP created\n  - Implemented vehicle list with cards\n  - Added details screen with specifications\n  - Integrated Willhaben deep linking\n  - Added phone call functionality with radio toggle\n  - Generated app icon\n\n## Dependencies\n- Expo SDK 54\n- React Navigation 7\n- expo-linking (for deep links and phone calls)\n- expo-web-browser (for opening browser URLs)\n- expo-image (for optimized images)\n- react-native-reanimated (for animations)\n\n## Next Steps (Future Enhancements)\n1. Integrate real Willhaben RSS feed or API\n2. Add push notifications for new listings\n3. Implement search and filtering\n4. Add favorites with AsyncStorage persistence\n5. Background sync for new vehicle alerts\n","path":null,"size_bytes":3906,"size_tokens":null},"navigation/RootStackNavigator.tsx":{"content":"import React from \"react\";\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { Alert, Pressable, Switch, View, StyleSheet } from \"react-native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport * as Linking from \"expo-linking\";\n\nimport HomeScreen from \"@/screens/HomeScreen\";\nimport DetailsScreen from \"@/screens/DetailsScreen\";\nimport { HeaderTitle } from \"@/components/HeaderTitle\";\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { getCommonScreenOptions } from \"@/navigation/screenOptions\";\nimport { useRadioMode } from \"@/context/RadioModeContext\";\nimport { usePhone } from \"@/context/PhoneContext\";\nimport { Spacing, Colors } from \"@/constants/theme\";\nimport { Vehicle } from \"@/services/api\";\n\nexport type RootStackParamList = {\n  Home: undefined;\n  Details: { vehicle: Vehicle };\n};\n\nconst Stack = createNativeStackNavigator<RootStackParamList>();\n\nfunction HeaderLeft() {\n  const { theme } = useTheme();\n\n  const handleLogout = () => {\n    Alert.alert(\"Logout\", \"No account connected\");\n  };\n\n  return (\n    <Pressable\n      onPress={handleLogout}\n      style={({ pressed }) => [\n        styles.headerButton,\n        { opacity: pressed ? 0.6 : 1 },\n      ]}\n      hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n    >\n      <ThemedText\n        style={[styles.logoutText, { color: theme.textSecondary }]}\n      >\n        Logout\n      </ThemedText>\n    </Pressable>\n  );\n}\n\nfunction HeaderRight() {\n  const { theme, isDark } = useTheme();\n  const { isRadioModeOn, toggleRadioMode } = useRadioMode();\n  const { currentPhone } = usePhone();\n\n  const handlePhoneCall = async () => {\n    if (!isRadioModeOn) {\n      Alert.alert(\"Radio Mode Off\", \"Enable radio mode to make calls\");\n      return;\n    }\n\n    if (!currentPhone) {\n      Alert.alert(\"No Phone\", \"No phone number available for this vehicle\");\n      return;\n    }\n\n    try {\n      const phoneUrl = `tel:${currentPhone}`;\n      const supported = await Linking.canOpenURL(phoneUrl);\n      if (supported) {\n        await Linking.openURL(phoneUrl);\n      } else {\n        Alert.alert(\"Error\", \"Phone calls are not supported on this device\");\n      }\n    } catch (error) {\n      Alert.alert(\"Error\", \"Could not initiate phone call\");\n    }\n  };\n\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  return (\n    <View style={styles.headerRightContainer}>\n      <Pressable\n        onPress={handlePhoneCall}\n        style={({ pressed }) => [\n          styles.iconButton,\n          { opacity: pressed ? 0.6 : 1 },\n        ]}\n        hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}\n        accessibilityLabel=\"Call seller\"\n        accessibilityHint={\n          isRadioModeOn && currentPhone\n            ? \"Double tap to call the seller\"\n            : \"Enable radio mode and select a vehicle with a phone number to call\"\n        }\n      >\n        <Feather\n          name=\"headphones\"\n          size={22}\n          color={isRadioModeOn && currentPhone ? colors.primary : theme.textSecondary}\n        />\n      </Pressable>\n      <Switch\n        value={isRadioModeOn}\n        onValueChange={toggleRadioMode}\n        trackColor={{ false: theme.border, true: colors.success }}\n        thumbColor=\"#FFFFFF\"\n        ios_backgroundColor={theme.border}\n        accessibilityLabel=\"Radio mode toggle\"\n        accessibilityHint=\"Toggle to enable or disable phone call functionality\"\n      />\n    </View>\n  );\n}\n\nexport default function RootStackNavigator() {\n  const { theme, isDark } = useTheme();\n\n  return (\n    <Stack.Navigator\n      screenOptions={{\n        ...getCommonScreenOptions({ theme, isDark }),\n      }}\n    >\n      <Stack.Screen\n        name=\"Home\"\n        component={HomeScreen}\n        options={{\n          headerTitle: () => <HeaderTitle title=\"Willhaben Cars\" />,\n          headerLeft: () => <HeaderLeft />,\n          headerRight: () => <HeaderRight />,\n        }}\n      />\n      <Stack.Screen\n        name=\"Details\"\n        component={DetailsScreen}\n        options={{\n          headerTitle: \"Vehicle Details\",\n          headerBackTitle: \"Back\",\n          headerTransparent: false,\n          headerStyle: {\n            backgroundColor: theme.backgroundDefault,\n          },\n        }}\n      />\n    </Stack.Navigator>\n  );\n}\n\nconst styles = StyleSheet.create({\n  headerButton: {\n    paddingVertical: Spacing.xs,\n  },\n  logoutText: {\n    fontSize: 14,\n    fontWeight: \"400\",\n  },\n  headerRightContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    gap: Spacing.md,\n  },\n  iconButton: {\n    padding: Spacing.xs,\n  },\n});\n","path":null,"size_bytes":4609,"size_tokens":null},"components/ScreenScrollView.tsx":{"content":"import { ScrollView, ScrollViewProps, StyleSheet } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useScreenInsets } from \"@/hooks/useScreenInsets\";\nimport { Spacing } from \"@/constants/theme\";\n\nexport function ScreenScrollView({\n  children,\n  contentContainerStyle,\n  style,\n  ...scrollViewProps\n}: ScrollViewProps) {\n  const { theme } = useTheme();\n  const { paddingTop, paddingBottom, scrollInsetBottom } = useScreenInsets();\n\n  return (\n    <ScrollView\n      style={[\n        styles.container,\n        { backgroundColor: theme.backgroundRoot },\n        style,\n      ]}\n      contentContainerStyle={[\n        {\n          paddingTop,\n          paddingBottom,\n        },\n        styles.contentContainer,\n        contentContainerStyle,\n      ]}\n      scrollIndicatorInsets={{ bottom: scrollInsetBottom }}\n      {...scrollViewProps}\n    >\n      {children}\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    paddingHorizontal: Spacing.xl,\n  },\n});\n","path":null,"size_bytes":1043,"size_tokens":null},"screens/DetailsScreen.tsx":{"content":"import React, { useEffect } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  ScrollView,\n  TouchableOpacity,\n  Alert,\n} from \"react-native\";\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\nimport { Image } from \"expo-image\";\nimport { useSafeAreaInsets } from \"react-native-safe-area-context\";\nimport { Feather } from \"@expo/vector-icons\";\nimport * as WebBrowser from \"expo-web-browser\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { Spacing, BorderRadius, Colors } from \"@/constants/theme\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { usePhone } from \"@/context/PhoneContext\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype DetailsScreenProps = NativeStackScreenProps<RootStackParamList, \"Details\">;\n\ninterface SpecRowProps {\n  label: string;\n  value: string | null | undefined;\n}\n\nfunction SpecRow({ label, value }: SpecRowProps) {\n  const { isDark } = useTheme();\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  if (!value) return null;\n\n  return (\n    <View style={styles.specRow}>\n      <ThemedText style={[styles.specLabel, { color: colors.textSecondary }]}>\n        {label}\n      </ThemedText>\n      <ThemedText style={[styles.specValue, { color: colors.text }]}>\n        {value}\n      </ThemedText>\n    </View>\n  );\n}\n\nexport default function DetailsScreen({ route }: DetailsScreenProps) {\n  const { vehicle } = route.params;\n  const { isDark } = useTheme();\n  const { setCurrentPhone } = usePhone();\n  const insets = useSafeAreaInsets();\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  useEffect(() => {\n    setCurrentPhone(vehicle.phone || null);\n  }, [vehicle.phone, setCurrentPhone]);\n\n  const formatPrice = (price: number | null) => {\n    if (!price) return \"Preis auf Anfrage\";\n    return new Intl.NumberFormat(\"de-AT\", {\n      style: \"currency\",\n      currency: \"EUR\",\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const formatMileage = (mileage: number | null) => {\n    if (!mileage) return null;\n    return new Intl.NumberFormat(\"de-AT\").format(mileage) + \" km\";\n  };\n\n  const handleOpenWillhaben = async () => {\n    const vehicleId = vehicle.id.replace('wh-', '');\n    const url = vehicle.willhabenUrl || `https://www.willhaben.at/iad/gebrauchtwagen/d/oglasi/${vehicleId}`;\n    try {\n      await WebBrowser.openBrowserAsync(url);\n    } catch {\n      Alert.alert(\"Error\", \"Could not open Willhaben\");\n    }\n  };\n\n  const placeholderImage = \"https://via.placeholder.com/400x250.png?text=Auto\";\n\n  return (\n    <ScrollView\n      style={[styles.container, { backgroundColor: colors.backgroundRoot }]}\n      contentContainerStyle={[\n        styles.contentContainer,\n        { paddingBottom: insets.bottom + Spacing.xl },\n      ]}\n      showsVerticalScrollIndicator={false}\n    >\n      <Image\n        source={{ uri: vehicle.imageUrl || placeholderImage }}\n        style={styles.heroImage}\n        contentFit=\"cover\"\n        transition={200}\n      />\n\n      <View style={styles.content}>\n        <ThemedText style={[styles.title, { color: colors.text }]}>\n          {vehicle.title}\n        </ThemedText>\n\n        <View\n          style={[\n            styles.priceCard,\n            { backgroundColor: colors.primary + \"1A\" },\n          ]}\n        >\n          <ThemedText style={[styles.priceText, { color: colors.primary }]}>\n            {formatPrice(vehicle.price)}\n          </ThemedText>\n        </View>\n\n        <View style={styles.specsContainer}>\n          <SpecRow label=\"Jahr\" value={vehicle.year?.toString()} />\n          <SpecRow label=\"Kilometerstand\" value={formatMileage(vehicle.mileage)} />\n          <SpecRow label=\"Kraftstoff\" value={vehicle.fuelType} />\n          <SpecRow label=\"Standort\" value={vehicle.location} />\n          {vehicle.phone ? (\n            <SpecRow label=\"Telefon\" value={vehicle.phone} />\n          ) : null}\n        </View>\n\n        <TouchableOpacity\n          onPress={handleOpenWillhaben}\n          style={[styles.willhabenButton, { backgroundColor: colors.primary }]}\n        >\n          <Feather name=\"external-link\" size={20} color=\"#FFFFFF\" />\n          <ThemedText style={styles.willhabenButtonText}>\n            Auf Willhaben ansehen\n          </ThemedText>\n        </TouchableOpacity>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    flexGrow: 1,\n  },\n  heroImage: {\n    width: \"100%\",\n    height: 250,\n    borderBottomLeftRadius: BorderRadius.md,\n    borderBottomRightRadius: BorderRadius.md,\n  },\n  content: {\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.lg,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"700\",\n  },\n  priceCard: {\n    marginTop: Spacing.md,\n    padding: Spacing.md,\n    borderRadius: BorderRadius.sm,\n  },\n  priceText: {\n    fontSize: 22,\n    fontWeight: \"700\",\n  },\n  specsContainer: {\n    marginTop: Spacing.lg,\n    gap: Spacing.sm,\n  },\n  specRow: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingVertical: Spacing.xs,\n  },\n  specLabel: {\n    fontSize: 14,\n  },\n  specValue: {\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n  willhabenButton: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: Spacing.sm,\n    marginTop: Spacing.xl,\n    padding: Spacing.md,\n    borderRadius: BorderRadius.md,\n  },\n  willhabenButtonText: {\n    color: \"#FFFFFF\",\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n});\n","path":null,"size_bytes":5484,"size_tokens":null},"start-all.sh":{"content":"#!/bin/bash\nnode server/index.js &\nBACKEND_PID=$!\nsleep 3\nEXPO_PACKAGER_PROXY_URL=https://$REPLIT_DEV_DOMAIN REACT_NATIVE_PACKAGER_HOSTNAME=$REPLIT_DEV_DOMAIN npx expo start\nkill $BACKEND_PID 2>/dev/null\n","path":null,"size_bytes":204,"size_tokens":null},"constants/theme.ts":{"content":"import { Platform } from \"react-native\";\n\nconst tintColorLight = \"#1E40AF\";\nconst tintColorDark = \"#3B82F6\";\n\nexport const Colors = {\n  light: {\n    text: \"#111827\",\n    textSecondary: \"#6B7280\",\n    buttonText: \"#FFFFFF\",\n    tabIconDefault: \"#687076\",\n    tabIconSelected: tintColorLight,\n    link: \"#1E40AF\",\n    primary: \"#1E40AF\",\n    success: \"#10B981\",\n    error: \"#EF4444\",\n    border: \"#E5E7EB\",\n    backgroundRoot: \"#F9FAFB\",\n    backgroundDefault: \"#FFFFFF\",\n    backgroundSecondary: \"#F3F4F6\",\n    backgroundTertiary: \"#E5E7EB\",\n  },\n  dark: {\n    text: \"#ECEDEE\",\n    textSecondary: \"#9BA1A6\",\n    buttonText: \"#FFFFFF\",\n    tabIconDefault: \"#9BA1A6\",\n    tabIconSelected: tintColorDark,\n    link: \"#3B82F6\",\n    primary: \"#3B82F6\",\n    success: \"#10B981\",\n    error: \"#EF4444\",\n    border: \"#374151\",\n    backgroundRoot: \"#1F2123\",\n    backgroundDefault: \"#2A2C2E\",\n    backgroundSecondary: \"#353739\",\n    backgroundTertiary: \"#404244\",\n  },\n};\n\nexport const Spacing = {\n  xs: 4,\n  sm: 8,\n  md: 16,\n  lg: 24,\n  xl: 32,\n  \"2xl\": 40,\n  \"3xl\": 48,\n  \"4xl\": 56,\n  \"5xl\": 64,\n  inputHeight: 48,\n  buttonHeight: 52,\n};\n\nexport const BorderRadius = {\n  xs: 4,\n  sm: 8,\n  md: 12,\n  lg: 16,\n  xl: 20,\n  \"2xl\": 24,\n  \"3xl\": 32,\n  full: 9999,\n};\n\nexport const Typography = {\n  h1: {\n    fontSize: 32,\n    fontWeight: \"700\" as const,\n  },\n  h2: {\n    fontSize: 28,\n    fontWeight: \"700\" as const,\n  },\n  h3: {\n    fontSize: 24,\n    fontWeight: \"600\" as const,\n  },\n  h4: {\n    fontSize: 20,\n    fontWeight: \"600\" as const,\n  },\n  body: {\n    fontSize: 16,\n    fontWeight: \"400\" as const,\n  },\n  small: {\n    fontSize: 14,\n    fontWeight: \"400\" as const,\n  },\n  link: {\n    fontSize: 16,\n    fontWeight: \"400\" as const,\n  },\n};\n\nexport const Fonts = Platform.select({\n  ios: {\n    sans: \"system-ui\",\n    serif: \"ui-serif\",\n    rounded: \"ui-rounded\",\n    mono: \"ui-monospace\",\n  },\n  default: {\n    sans: \"normal\",\n    serif: \"serif\",\n    rounded: \"normal\",\n    mono: \"monospace\",\n  },\n  web: {\n    sans: \"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n    serif: \"Georgia, 'Times New Roman', serif\",\n    rounded:\n      \"'SF Pro Rounded', 'Hiragino Maru Gothic ProN', Meiryo, 'MS PGothic', sans-serif\",\n    mono: \"SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace\",\n  },\n});\n","path":null,"size_bytes":2360,"size_tokens":null},"hooks/useTheme.ts":{"content":"import { Colors } from \"@/constants/theme\";\nimport { useColorScheme } from \"@/hooks/useColorScheme\";\n\nexport function useTheme() {\n  const colorScheme = useColorScheme();\n  const isDark = colorScheme === \"dark\";\n  const theme = Colors[colorScheme ?? \"light\"];\n\n  return {\n    theme,\n    isDark,\n  };\n}\n","path":null,"size_bytes":302,"size_tokens":null},"scripts/build.js":{"content":"const fs = require(\"fs\");\nconst path = require(\"path\");\nconst { spawn } = require(\"child_process\");\nconst { Readable } = require(\"stream\");\nconst { pipeline } = require(\"stream/promises\");\n\nlet metroProcess = null;\n\nfunction exitWithError(message) {\n  console.error(message);\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(1);\n}\n\nfunction setupSignalHandlers() {\n  const cleanup = () => {\n    if (metroProcess) {\n      console.log(\"Cleaning up Metro process...\");\n      metroProcess.kill();\n    }\n    process.exit(0);\n  };\n\n  process.on(\"SIGINT\", cleanup);\n  process.on(\"SIGTERM\", cleanup);\n  process.on(\"SIGHUP\", cleanup);\n}\n\nfunction getDeploymentUrl() {\n  if (process.env.REPLIT_INTERNAL_APP_DOMAIN) {\n    const url = `https://${process.env.REPLIT_INTERNAL_APP_DOMAIN}`;\n    console.log(\"Using REPLIT_INTERNAL_APP_DOMAIN:\", url);\n    return url;\n  }\n\n  if (process.env.REPLIT_DEV_DOMAIN) {\n    const url = `https://${process.env.REPLIT_DEV_DOMAIN}`;\n    console.log(\"Using REPLIT_DEV_DOMAIN:\", url);\n    return url;\n  }\n\n  console.error(\n    \"ERROR: REPLIT_INTERNAL_APP_DOMAIN and REPLIT_DEV_DOMAIN not set\",\n  );\n  process.exit(1);\n}\n\nfunction prepareDirectories(timestamp) {\n  console.log(\"Preparing build directories...\");\n\n  if (fs.existsSync(\"static-build\")) {\n    fs.rmSync(\"static-build\", { recursive: true });\n  }\n\n  const dirs = [\n    path.join(\"static-build\", timestamp, \"_expo\", \"static\", \"js\", \"ios\"),\n    path.join(\"static-build\", timestamp, \"_expo\", \"static\", \"js\", \"android\"),\n    path.join(\"static-build\", \"ios\"),\n    path.join(\"static-build\", \"android\"),\n  ];\n\n  for (const dir of dirs) {\n    fs.mkdirSync(dir, { recursive: true });\n  }\n\n  console.log(\"Build:\", timestamp);\n}\n\nfunction clearMetroCache() {\n  console.log(\"Clearing Metro cache...\");\n\n  const cacheDirs = [\n    ...fs.globSync(\".metro-cache\"),\n    ...fs.globSync(\"node_modules/.cache/metro\"),\n  ];\n\n  for (const dir of cacheDirs) {\n    fs.rmSync(dir, { recursive: true, force: true });\n  }\n\n  console.log(\"Cache cleared\");\n}\n\nasync function checkMetroHealth() {\n  try {\n    const response = await fetch(\"http://localhost:8081/status\");\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n\nasync function startMetro() {\n  const isRunning = await checkMetroHealth();\n  if (isRunning) {\n    return;\n  }\n\n  console.log(\"Starting Metro...\");\n  metroProcess = spawn(\"npm\", [\"run\", \"dev\"], {\n    stdio: [\"ignore\", \"ignore\", \"ignore\"],\n    detached: false,\n  });\n\n  for (let i = 0; i < 30; i++) {\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n    const healthy = await checkMetroHealth();\n    if (healthy) {\n      console.log(\"Metro ready\");\n      return;\n    }\n  }\n\n  console.error(\"Metro timeout\");\n  process.exit(1);\n}\n\nasync function downloadFile(url, outputPath) {\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const file = fs.createWriteStream(outputPath);\n    await pipeline(Readable.fromWeb(response.body), file);\n\n    const fileSize = fs.statSync(outputPath).size;\n\n    if (fileSize === 0) {\n      fs.unlinkSync(outputPath);\n      throw new Error(\"Downloaded file is empty\");\n    }\n  } catch (error) {\n    if (fs.existsSync(outputPath)) {\n      fs.unlinkSync(outputPath);\n    }\n    throw error;\n  }\n}\n\nasync function downloadBundle(platform, timestamp) {\n  const url = new URL(\"http://localhost:8081/index.bundle\");\n  url.searchParams.set(\"platform\", platform);\n  url.searchParams.set(\"dev\", \"false\");\n  url.searchParams.set(\"hot\", \"false\");\n  url.searchParams.set(\"lazy\", \"false\");\n  url.searchParams.set(\"minify\", \"true\");\n\n  const output = path.join(\n    \"static-build\",\n    timestamp,\n    \"_expo\",\n    \"static\",\n    \"js\",\n    platform,\n    \"bundle.js\",\n  );\n\n  try {\n    await downloadFile(url.toString(), output);\n  } catch (error) {\n    exitWithError(`Failed to download ${platform} bundle: ${error.message}`);\n  }\n}\n\nasync function downloadManifest(platform) {\n  const response = await fetch(\"http://localhost:8081/manifest\", {\n    headers: { \"expo-platform\": platform },\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status}`);\n  }\n\n  return await response.json();\n}\n\nasync function downloadBundlesAndManifests(timestamp) {\n  console.log(\"Downloading bundles and manifests...\");\n\n  try {\n    const [, , iosManifest, androidManifest] = await Promise.all([\n      downloadBundle(\"ios\", timestamp),\n      downloadBundle(\"android\", timestamp),\n      downloadManifest(\"ios\"),\n      downloadManifest(\"android\"),\n    ]);\n    console.log(\"Downloaded\");\n    return { ios: iosManifest, android: androidManifest };\n  } catch (error) {\n    exitWithError(`Download failed: ${error.message}`);\n  }\n}\n\nfunction extractAssets(timestamp) {\n  const bundles = {\n    ios: fs.readFileSync(\n      path.join(\n        \"static-build\",\n        timestamp,\n        \"_expo\",\n        \"static\",\n        \"js\",\n        \"ios\",\n        \"bundle.js\",\n      ),\n      \"utf-8\",\n    ),\n    android: fs.readFileSync(\n      path.join(\n        \"static-build\",\n        timestamp,\n        \"_expo\",\n        \"static\",\n        \"js\",\n        \"android\",\n        \"bundle.js\",\n      ),\n      \"utf-8\",\n    ),\n  };\n\n  const assetsMap = new Map();\n  const assetPattern =\n    /httpServerLocation:\"([^\"]+)\"[^}]*hash:\"([^\"]+)\"[^}]*name:\"([^\"]+)\"[^}]*type:\"([^\"]+)\"/g;\n\n  const extractFromBundle = (bundle, platform) => {\n    for (const match of bundle.matchAll(assetPattern)) {\n      const originalPath = match[1];\n      const filename = match[3] + \".\" + match[4];\n\n      const tempUrl = new URL(`http://localhost:8081${originalPath}`);\n      const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n      if (!unstablePath) {\n        throw new Error(`Asset missing unstable_path: ${originalPath}`);\n      }\n\n      const decodedPath = decodeURIComponent(unstablePath).replace(/^\\.\\//, \"\");\n      const key = path.posix.join(decodedPath, filename);\n\n      if (!assetsMap.has(key)) {\n        const asset = {\n          url: path.posix.join(\"/\", decodedPath, filename),\n          originalPath: originalPath,\n          filename: filename,\n          relativePath: decodedPath,\n          hash: match[2],\n          platforms: new Set(),\n        };\n\n        assetsMap.set(key, asset);\n      }\n      assetsMap.get(key).platforms.add(platform);\n    }\n  };\n\n  extractFromBundle(bundles.ios, \"ios\");\n  extractFromBundle(bundles.android, \"android\");\n\n  return Array.from(assetsMap.values());\n}\n\nasync function downloadAssets(assets, timestamp) {\n  if (assets.length === 0) {\n    return 0;\n  }\n\n  console.log(\"Downloading assets...\");\n  let successCount = 0;\n  const failures = [];\n\n  const downloadPromises = assets.map(async (asset) => {\n    const platform = Array.from(asset.platforms)[0];\n\n    const tempUrl = new URL(`http://localhost:8081${asset.originalPath}`);\n    const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n    if (!unstablePath) {\n      throw new Error(`Asset missing unstable_path: ${asset.originalPath}`);\n    }\n\n    const decodedPath = decodeURIComponent(unstablePath).replace(/^\\./, \"\");\n    const metroUrl = new URL(\n      `http://localhost:8081${path.posix.join(\"/assets\", decodedPath, asset.filename)}`,\n    );\n    metroUrl.searchParams.set(\"platform\", platform);\n    metroUrl.searchParams.set(\"hash\", asset.hash);\n\n    const outputDir = path.join(\n      \"static-build\",\n      timestamp,\n      \"_expo\",\n      \"static\",\n      \"js\",\n      asset.relativePath,\n    );\n    fs.mkdirSync(outputDir, { recursive: true });\n    const output = path.join(outputDir, asset.filename);\n\n    try {\n      await downloadFile(metroUrl.toString(), output);\n      successCount++;\n    } catch (error) {\n      failures.push({\n        filename: asset.filename,\n        error: error.message,\n        url: metroUrl.toString(),\n      });\n    }\n  });\n\n  await Promise.all(downloadPromises);\n\n  if (failures.length > 0) {\n    const errorMsg =\n      `Failed to download ${failures.length} asset(s):\\n` +\n      failures\n        .map((f) => `  - ${f.filename}: ${f.error} (${f.url})`)\n        .join(\"\\n\");\n    exitWithError(errorMsg);\n  }\n\n  console.log(`Downloaded ${successCount} assets`);\n  return successCount;\n}\n\nfunction updateBundleUrls(timestamp, baseUrl) {\n  const updateForPlatform = (platform) => {\n    const bundlePath = path.join(\n      \"static-build\",\n      timestamp,\n      \"_expo\",\n      \"static\",\n      \"js\",\n      platform,\n      \"bundle.js\",\n    );\n    let bundle = fs.readFileSync(bundlePath, \"utf-8\");\n\n    bundle = bundle.replace(\n      /httpServerLocation:\"(\\/[^\"]+)\"/g,\n      (_match, capturedPath) => {\n        const tempUrl = new URL(`http://localhost:8081${capturedPath}`);\n        const unstablePath = tempUrl.searchParams.get(\"unstable_path\");\n\n        if (!unstablePath) {\n          throw new Error(\n            `Asset missing unstable_path in bundle: ${capturedPath}`,\n          );\n        }\n\n        const decodedPath = decodeURIComponent(unstablePath).replace(\n          /^\\.\\//,\n          \"\",\n        );\n        return `httpServerLocation:\"${baseUrl}/${timestamp}/_expo/static/js/${decodedPath}\"`;\n      },\n    );\n\n    fs.writeFileSync(bundlePath, bundle);\n  };\n\n  updateForPlatform(\"ios\");\n  updateForPlatform(\"android\");\n  console.log(\"Updated bundle URLs\");\n}\n\nfunction updateManifests(manifests, timestamp, baseUrl, assetsByHash) {\n  const updateForPlatform = (platform, manifest) => {\n    if (!manifest.launchAsset || !manifest.extra) {\n      exitWithError(`Malformed manifest for ${platform}`);\n    }\n\n    manifest.launchAsset.url = `${baseUrl}/${timestamp}/_expo/static/js/${platform}/bundle.js`;\n    manifest.launchAsset.key = `bundle-${timestamp}`;\n    manifest.createdAt = new Date(\n      Number(timestamp.split(\"-\")[0]),\n    ).toISOString();\n    manifest.extra.expoClient.hostUri =\n      baseUrl.replace(\"https://\", \"\") + \"/\" + platform;\n    manifest.extra.expoGo.debuggerHost =\n      baseUrl.replace(\"https://\", \"\") + \"/\" + platform;\n    manifest.extra.expoGo.packagerOpts.dev = false;\n\n    if (manifest.assets && manifest.assets.length > 0) {\n      manifest.assets.forEach((asset) => {\n        if (!asset.url) return;\n\n        const hash = asset.hash;\n        if (!hash) return;\n\n        const assetInfo = assetsByHash.get(hash);\n        if (!assetInfo) return;\n\n        asset.url = `${baseUrl}/${timestamp}/_expo/static/js/${assetInfo.relativePath}/${assetInfo.filename}`;\n      });\n    }\n\n    fs.writeFileSync(\n      path.join(\"static-build\", platform, \"manifest.json\"),\n      JSON.stringify(manifest, null, 2),\n    );\n  };\n\n  updateForPlatform(\"ios\", manifests.ios);\n  updateForPlatform(\"android\", manifests.android);\n  console.log(\"Manifests updated\");\n}\n\nfunction createLandingPage(baseUrl) {\n  const expsUrl = baseUrl.replace(\"https://\", \"\");\n  const template = fs.readFileSync(\n    path.join(\"scripts\", \"landing-page-template.html\"),\n    \"utf-8\",\n  );\n\n  const html = template\n    .replace(/BASE_URL_PLACEHOLDER/g, baseUrl)\n    .replace(/EXPS_URL_PLACEHOLDER/g, expsUrl);\n\n  fs.writeFileSync(path.join(\"static-build\", \"index.html\"), html);\n  console.log(\"Complete\");\n}\n\nasync function main() {\n  console.log(\"Building static Expo Go deployment...\");\n\n  setupSignalHandlers();\n\n  const baseUrl = getDeploymentUrl();\n  const timestamp = `${Date.now()}-${process.pid}`;\n\n  prepareDirectories(timestamp);\n  clearMetroCache();\n\n  await startMetro();\n  const manifests = await downloadBundlesAndManifests(timestamp);\n\n  console.log(\"Processing assets...\");\n  const assets = extractAssets(timestamp);\n  console.log(\"Found\", assets.length, \"unique asset(s)\");\n\n  const assetsByHash = new Map();\n  for (const asset of assets) {\n    assetsByHash.set(asset.hash, {\n      relativePath: asset.relativePath,\n      filename: asset.filename,\n    });\n  }\n\n  const assetCount = await downloadAssets(assets, timestamp);\n\n  if (assetCount > 0) {\n    updateBundleUrls(timestamp, baseUrl);\n  }\n\n  console.log(\"Updating manifests and creating landing page...\");\n  updateManifests(manifests, timestamp, baseUrl, assetsByHash);\n  createLandingPage(baseUrl);\n\n  console.log(\"Build complete! Deploy to:\", baseUrl);\n\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(0);\n}\n\nmain().catch((error) => {\n  console.error(\"Build failed:\", error.message);\n  if (metroProcess) {\n    metroProcess.kill();\n  }\n  process.exit(1);\n});\n","path":null,"size_bytes":12348,"size_tokens":null},"components/SimilarVehicleCard.tsx":{"content":"import React from \"react\";\nimport { View, StyleSheet, Pressable, Alert, Platform } from \"react-native\";\nimport { Image } from \"expo-image\";\nimport * as Linking from \"expo-linking\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  WithSpringConfig,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Colors } from \"@/constants/theme\";\nimport { Vehicle } from \"@/data/mockVehicles\";\n\ninterface SimilarVehicleCardProps {\n  vehicle: Vehicle;\n}\n\nconst springConfig: WithSpringConfig = {\n  damping: 15,\n  mass: 0.3,\n  stiffness: 150,\n  overshootClamping: true,\n  energyThreshold: 0.001,\n};\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nexport function SimilarVehicleCard({ vehicle }: SimilarVehicleCardProps) {\n  const { isDark } = useTheme();\n  const scale = useSharedValue(1);\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    scale.value = withSpring(0.95, springConfig);\n  };\n\n  const handlePressOut = () => {\n    scale.value = withSpring(1, springConfig);\n  };\n\n  const handlePress = async () => {\n    const willhabenDeepLink = `willhaben://ad/${vehicle.id}`;\n    const willhabenWebUrl = `https://www.willhaben.at/iad/gebrauchtwagen/d/oglasi/${vehicle.id}`;\n\n    try {\n      const canOpen = await Linking.canOpenURL(willhabenDeepLink);\n      if (canOpen) {\n        await Linking.openURL(willhabenDeepLink);\n      } else {\n        await WebBrowser.openBrowserAsync(willhabenWebUrl);\n      }\n    } catch (error) {\n      try {\n        await WebBrowser.openBrowserAsync(willhabenWebUrl);\n      } catch {\n        Alert.alert(\"Error\", \"Could not open Willhaben\");\n      }\n    }\n  };\n\n  const formatPrice = (price: number) => {\n    return new Intl.NumberFormat(\"de-AT\", {\n      style: \"currency\",\n      currency: \"EUR\",\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  return (\n    <AnimatedPressable\n      onPress={handlePress}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      style={[\n        styles.card,\n        {\n          backgroundColor: colors.backgroundDefault,\n          borderColor: colors.border,\n        },\n        animatedStyle,\n      ]}\n      accessibilityLabel={`${vehicle.title}, ${formatPrice(vehicle.price)}`}\n      accessibilityRole=\"button\"\n    >\n      <Image\n        source={{ uri: vehicle.imageUrl }}\n        style={styles.image}\n        contentFit=\"cover\"\n        transition={200}\n      />\n      <View style={styles.content}>\n        <ThemedText\n          style={[styles.title, { color: colors.text }]}\n          numberOfLines={2}\n        >\n          {vehicle.title}\n        </ThemedText>\n        <ThemedText style={[styles.price, { color: colors.primary }]}>\n          {formatPrice(vehicle.price)}\n        </ThemedText>\n      </View>\n    </AnimatedPressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    width: 160,\n    borderRadius: BorderRadius.md,\n    borderWidth: 1,\n    overflow: \"hidden\",\n    ...Platform.select({\n      ios: {\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.08,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  image: {\n    width: \"100%\",\n    height: 100,\n  },\n  content: {\n    padding: Spacing.sm,\n  },\n  title: {\n    fontSize: 14,\n    fontWeight: \"600\",\n  },\n  price: {\n    fontSize: 16,\n    fontWeight: \"700\",\n    marginTop: Spacing.xs,\n  },\n});\n","path":null,"size_bytes":3692,"size_tokens":null},"components/ThemedText.tsx":{"content":"import { Text, type TextProps } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Typography } from \"@/constants/theme\";\n\nexport type ThemedTextProps = TextProps & {\n  lightColor?: string;\n  darkColor?: string;\n  type?: \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"body\" | \"small\" | \"link\";\n};\n\nexport function ThemedText({\n  style,\n  lightColor,\n  darkColor,\n  type = \"body\",\n  ...rest\n}: ThemedTextProps) {\n  const { theme, isDark } = useTheme();\n\n  const getColor = () => {\n    if (isDark && darkColor) {\n      return darkColor;\n    }\n\n    if (!isDark && lightColor) {\n      return lightColor;\n    }\n\n    if (type === \"link\") {\n      return theme.link;\n    }\n\n    return theme.text;\n  };\n\n  const getTypeStyle = () => {\n    switch (type) {\n      case \"h1\":\n        return Typography.h1;\n      case \"h2\":\n        return Typography.h2;\n      case \"h3\":\n        return Typography.h3;\n      case \"h4\":\n        return Typography.h4;\n      case \"body\":\n        return Typography.body;\n      case \"small\":\n        return Typography.small;\n      case \"link\":\n        return Typography.link;\n      default:\n        return Typography.body;\n    }\n  };\n\n  return (\n    <Text style={[{ color: getColor() }, getTypeStyle(), style]} {...rest} />\n  );\n}\n","path":null,"size_bytes":1251,"size_tokens":null},"screens/HomeScreen.tsx":{"content":"import React, { useEffect, useState, useCallback, useRef } from \"react\";\nimport { StyleSheet, RefreshControl, ActivityIndicator, View, AppState } from \"react-native\";\nimport { NativeStackNavigationProp } from \"@react-navigation/native-stack\";\n\nimport { VehicleCard } from \"@/components/VehicleCard\";\nimport { ScreenFlatList } from \"@/components/ScreenFlatList\";\nimport { ThemedText } from \"@/components/ThemedText\";\nimport Spacer from \"@/components/Spacer\";\nimport { Spacing, Colors } from \"@/constants/theme\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { usePhone } from \"@/context/PhoneContext\";\nimport { useNewCarSound } from \"@/hooks/useNewCarSound\";\nimport { fetchVehicles, markVehiclesAsSeen, Vehicle } from \"@/services/api\";\nimport { RootStackParamList } from \"@/navigation/RootStackNavigator\";\n\ntype HomeScreenProps = {\n  navigation: NativeStackNavigationProp<RootStackParamList, \"Home\">;\n};\n\nconst POLL_INTERVAL = 10000;\n\nexport default function HomeScreen({ navigation }: HomeScreenProps) {\n  const { isDark } = useTheme();\n  const { setCurrentPhone } = usePhone();\n  const { playNewCarSound } = useNewCarSound();\n  const [vehicles, setVehicles] = useState<Vehicle[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [lastScrapeTime, setLastScrapeTime] = useState<string | null>(null);\n  const [newCarCount, setNewCarCount] = useState(0);\n  const previousVehicleIds = useRef<Set<string>>(new Set());\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  const loadVehicles = useCallback(async (isRefresh = false) => {\n    try {\n      const data = await fetchVehicles();\n      \n      if (data.vehicles.length > 0) {\n        const newIds = new Set(data.vehicles.map(v => v.id));\n        const actuallyNew = data.vehicles.filter(v => !previousVehicleIds.current.has(v.id));\n        \n        if (previousVehicleIds.current.size > 0 && actuallyNew.length > 0) {\n          console.log(`Found ${actuallyNew.length} new vehicles!`);\n          setNewCarCount(prev => prev + actuallyNew.length);\n          playNewCarSound();\n        }\n        \n        previousVehicleIds.current = newIds;\n      }\n      \n      setVehicles(data.vehicles);\n      setLastScrapeTime(data.lastScrapeTime);\n    } catch (error) {\n      console.error(\"Error fetching vehicles:\", error);\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  }, [playNewCarSound]);\n\n  useEffect(() => {\n    loadVehicles();\n  }, []);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      loadVehicles();\n    }, POLL_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, [loadVehicles]);\n\n  useEffect(() => {\n    const subscription = AppState.addEventListener('change', (state) => {\n      if (state === 'active') {\n        loadVehicles();\n      }\n    });\n\n    return () => subscription?.remove();\n  }, [loadVehicles]);\n\n  useEffect(() => {\n    if (vehicles.length > 0 && vehicles[0].phone) {\n      setCurrentPhone(vehicles[0].phone);\n    }\n  }, [vehicles, setCurrentPhone]);\n\n  const onRefresh = useCallback(() => {\n    setRefreshing(true);\n    loadVehicles(true);\n  }, [loadVehicles]);\n\n  const handleCardPress = (vehicle: Vehicle) => {\n    setCurrentPhone(vehicle.phone || null);\n    navigation.navigate(\"Details\", { vehicle });\n  };\n\n  const handleClearNewCount = async () => {\n    setNewCarCount(0);\n    await markVehiclesAsSeen();\n  };\n\n  const renderItem = ({ item, index }: { item: Vehicle; index: number }) => (\n    <>\n      <VehicleCard \n        vehicle={item} \n        onCardPress={() => handleCardPress(item)}\n        isNew={item.isNew} \n      />\n      {index < vehicles.length - 1 ? <Spacer height={Spacing.md} /> : null}\n    </>\n  );\n\n  const renderHeader = () => (\n    <View style={styles.headerContainer}>\n      {newCarCount > 0 ? (\n        <View style={[styles.newCarBanner, { backgroundColor: colors.primary }]}>\n          <ThemedText style={styles.newCarText}>\n            {newCarCount} neue Fahrzeuge gefunden!\n          </ThemedText>\n        </View>\n      ) : null}\n      {lastScrapeTime ? (\n        <ThemedText style={[styles.lastUpdate, { color: colors.textSecondary }]}>\n          Letzte Aktualisierung: {new Date(lastScrapeTime).toLocaleTimeString('de-AT')}\n        </ThemedText>\n      ) : null}\n    </View>\n  );\n\n  if (loading) {\n    return (\n      <View style={[styles.loadingContainer, { backgroundColor: colors.backgroundRoot }]}>\n        <ActivityIndicator size=\"large\" color={colors.primary} />\n        <ThemedText style={[styles.loadingText, { color: colors.textSecondary }]}>\n          Lade Fahrzeuge von Willhaben...\n        </ThemedText>\n      </View>\n    );\n  }\n\n  if (vehicles.length === 0) {\n    return (\n      <View style={[styles.emptyContainer, { backgroundColor: colors.backgroundRoot }]}>\n        <ThemedText style={styles.emptyText}>Keine Fahrzeuge verfügbar</ThemedText>\n        <ThemedText style={[styles.emptyHint, { color: colors.textSecondary }]}>\n          Willhaben wird alle 30 Sekunden gescannt\n        </ThemedText>\n      </View>\n    );\n  }\n\n  return (\n    <ScreenFlatList\n      data={vehicles}\n      renderItem={renderItem}\n      keyExtractor={(item) => item.id}\n      ListHeaderComponent={renderHeader}\n      refreshControl={\n        <RefreshControl\n          refreshing={refreshing}\n          onRefresh={onRefresh}\n          tintColor={colors.primary}\n          colors={[colors.primary]}\n        />\n      }\n      showsVerticalScrollIndicator={false}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  loadingContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    gap: Spacing.md,\n  },\n  loadingText: {\n    fontSize: 14,\n    marginTop: Spacing.sm,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  emptyText: {\n    fontSize: 18,\n    fontWeight: \"600\",\n  },\n  emptyHint: {\n    fontSize: 14,\n    marginTop: Spacing.sm,\n  },\n  headerContainer: {\n    paddingHorizontal: Spacing.md,\n    paddingBottom: Spacing.md,\n  },\n  newCarBanner: {\n    padding: Spacing.md,\n    borderRadius: 8,\n    marginBottom: Spacing.sm,\n  },\n  newCarText: {\n    color: \"#FFFFFF\",\n    fontWeight: \"600\",\n    textAlign: \"center\",\n  },\n  lastUpdate: {\n    fontSize: 12,\n    textAlign: \"center\",\n  },\n});\n","path":null,"size_bytes":6287,"size_tokens":null},"metro.config.js":{"content":"const { getDefaultConfig } = require('expo/metro-config');\nconst { spawn } = require('child_process');\nconst http = require('http');\n\nfunction checkBackend() {\n  return new Promise((resolve) => {\n    const req = http.get('http://localhost:8082/api/health', (res) => {\n      resolve(res.statusCode === 200);\n    });\n    req.on('error', () => resolve(false));\n    req.setTimeout(1000, () => {\n      req.destroy();\n      resolve(false);\n    });\n  });\n}\n\nasync function startBackendIfNeeded() {\n  const isRunning = await checkBackend();\n  if (!isRunning) {\n    console.log('\\n[Metro] Starting backend server on port 8082...\\n');\n    const backend = spawn('node', ['server/index.js'], {\n      cwd: process.cwd(),\n      stdio: 'inherit',\n      detached: true,\n    });\n    backend.unref();\n    \n    await new Promise(resolve => setTimeout(resolve, 5000));\n    console.log('\\n[Metro] Backend server started!\\n');\n  } else {\n    console.log('\\n[Metro] Backend already running on port 8082\\n');\n  }\n}\n\nstartBackendIfNeeded();\n\nconst config = getDefaultConfig(__dirname);\n\nmodule.exports = config;\n","path":null,"size_bytes":1087,"size_tokens":null},"context/PhoneContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode } from \"react\";\n\ninterface PhoneContextType {\n  currentPhone: string | null;\n  setCurrentPhone: (phone: string | null) => void;\n}\n\nconst PhoneContext = createContext<PhoneContextType | undefined>(undefined);\n\nexport function PhoneProvider({ children }: { children: ReactNode }) {\n  const [currentPhone, setCurrentPhone] = useState<string | null>(null);\n\n  return (\n    <PhoneContext.Provider value={{ currentPhone, setCurrentPhone }}>\n      {children}\n    </PhoneContext.Provider>\n  );\n}\n\nexport function usePhone() {\n  const context = useContext(PhoneContext);\n  if (context === undefined) {\n    throw new Error(\"usePhone must be used within a PhoneProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":749,"size_tokens":null},"start-dev.js":{"content":"const { spawn } = require('child_process');\n\nconsole.log('=================================');\nconsole.log('Starting Willhaben Cars App...');\nconsole.log('=================================\\n');\n\nconst backend = spawn('node', ['server/index.js'], {\n  cwd: process.cwd(),\n  stdio: 'inherit',\n  env: process.env,\n});\n\nbackend.on('error', (err) => {\n  console.error('Backend failed to start:', err.message);\n});\n\nbackend.on('exit', (code) => {\n  if (code !== 0) {\n    console.error('Backend exited with code:', code);\n  }\n});\n\nsetTimeout(() => {\n  console.log('\\n=================================');\n  console.log('Starting Expo Metro bundler...');\n  console.log('=================================\\n');\n  \n  const expo = spawn('npx', ['expo', 'start'], {\n    cwd: process.cwd(),\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      EXPO_PACKAGER_PROXY_URL: `https://${process.env.REPLIT_DEV_DOMAIN}`,\n      REACT_NATIVE_PACKAGER_HOSTNAME: process.env.REPLIT_DEV_DOMAIN,\n    },\n    shell: true,\n  });\n\n  expo.on('error', (err) => {\n    console.error('Expo failed to start:', err.message);\n  });\n\n  expo.on('exit', (code) => {\n    console.log('Expo exited with code:', code);\n    backend.kill();\n    process.exit(code || 0);\n  });\n}, 5000);\n\nprocess.on('SIGINT', () => {\n  console.log('\\nShutting down...');\n  backend.kill();\n  process.exit(0);\n});\n\nprocess.on('SIGTERM', () => {\n  console.log('\\nShutting down...');\n  backend.kill();\n  process.exit(0);\n});\n","path":null,"size_bytes":1460,"size_tokens":null},"navigation/screenOptions.ts":{"content":"import { Platform } from \"react-native\";\nimport { NativeStackNavigationOptions } from \"@react-navigation/native-stack\";\nimport { isLiquidGlassAvailable } from \"expo-glass-effect\";\n\ninterface ScreenOptionsParams {\n  theme: {\n    backgroundRoot: string;\n    text: string;\n  };\n  isDark: boolean;\n  transparent?: boolean;\n}\n\nexport const getCommonScreenOptions = ({\n  theme,\n  isDark,\n  transparent = true,\n}: ScreenOptionsParams): NativeStackNavigationOptions => ({\n  headerTitleAlign: \"center\",\n  headerTransparent: transparent,\n  headerBlurEffect: isDark ? \"dark\" : \"light\",\n  headerTintColor: theme.text,\n  headerStyle: {\n    backgroundColor: Platform.select({\n      ios: undefined,\n      android: theme.backgroundRoot,\n      web: theme.backgroundRoot,\n    }),\n  },\n  gestureEnabled: true,\n  gestureDirection: \"horizontal\",\n  fullScreenGestureEnabled: isLiquidGlassAvailable() ? false : true,\n  contentStyle: {\n    backgroundColor: theme.backgroundRoot,\n  },\n});\n","path":null,"size_bytes":964,"size_tokens":null},"data/mockVehicles.ts":{"content":"export interface Vehicle {\n  id: string;\n  title: string;\n  year: number;\n  mileage: number;\n  price: number;\n  location: string;\n  phone?: string;\n  imageUrl: string;\n  expirationDate: string;\n  fuelType: string;\n  transmission: string;\n  power: string;\n  bodyType: string;\n  color: string;\n  doors: number;\n  seats: number;\n  previousOwners: number;\n  description: string;\n  createdAt: string;\n}\n\nexport const mockVehicles: Vehicle[] = [\n  {\n    id: \"auto-12345678\",\n    title: \"BMW 320d xDrive Touring M Sport\",\n    year: 2021,\n    mileage: 45000,\n    price: 38900,\n    location: \"Wien\",\n    phone: \"+43 664 1234567\",\n    imageUrl: \"https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-01-15\",\n    fuelType: \"Diesel\",\n    transmission: \"Automatik\",\n    power: \"190 PS\",\n    bodyType: \"Kombi\",\n    color: \"Schwarz Metallic\",\n    doors: 5,\n    seats: 5,\n    previousOwners: 1,\n    description: \"Gepflegter BMW mit voller Ausstattung, Serviceheft, Nichtraucher.\",\n    createdAt: \"2024-12-01T10:30:00Z\",\n  },\n  {\n    id: \"auto-23456789\",\n    title: \"Audi A4 Avant 2.0 TDI quattro\",\n    year: 2020,\n    mileage: 62000,\n    price: 32500,\n    location: \"Graz\",\n    phone: \"+43 699 2345678\",\n    imageUrl: \"https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-01-20\",\n    fuelType: \"Diesel\",\n    transmission: \"Automatik\",\n    power: \"150 PS\",\n    bodyType: \"Kombi\",\n    color: \"Grau Metallic\",\n    doors: 5,\n    seats: 5,\n    previousOwners: 2,\n    description: \"S-Line Paket, LED Scheinwerfer, Navigationssystem.\",\n    createdAt: \"2024-11-30T14:15:00Z\",\n  },\n  {\n    id: \"auto-34567890\",\n    title: \"Mercedes-Benz C 220 d AMG Line\",\n    year: 2022,\n    mileage: 28000,\n    price: 45900,\n    location: \"Salzburg\",\n    imageUrl: \"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-02-01\",\n    fuelType: \"Diesel\",\n    transmission: \"Automatik\",\n    power: \"200 PS\",\n    bodyType: \"Limousine\",\n    color: \"Weiß\",\n    doors: 4,\n    seats: 5,\n    previousOwners: 1,\n    description: \"AMG Line, Panoramadach, 360° Kamera, Top Zustand.\",\n    createdAt: \"2024-11-29T09:00:00Z\",\n  },\n  {\n    id: \"auto-45678901\",\n    title: \"Volkswagen Golf 8 GTI\",\n    year: 2023,\n    mileage: 15000,\n    price: 41000,\n    location: \"Linz\",\n    phone: \"+43 660 4567890\",\n    imageUrl: \"https://images.unsplash.com/photo-1471444928139-48c5bf5173f8?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-01-25\",\n    fuelType: \"Benzin\",\n    transmission: \"DSG\",\n    power: \"245 PS\",\n    bodyType: \"Hatchback\",\n    color: \"Rot\",\n    doors: 5,\n    seats: 5,\n    previousOwners: 1,\n    description: \"Wie neu, Werksgarantie, alle Extras.\",\n    createdAt: \"2024-11-28T16:45:00Z\",\n  },\n  {\n    id: \"auto-56789012\",\n    title: \"Skoda Octavia RS Combi\",\n    year: 2021,\n    mileage: 55000,\n    price: 29900,\n    location: \"Innsbruck\",\n    phone: \"+43 676 5678901\",\n    imageUrl: \"https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-01-18\",\n    fuelType: \"Benzin\",\n    transmission: \"DSG\",\n    power: \"245 PS\",\n    bodyType: \"Kombi\",\n    color: \"Blau Metallic\",\n    doors: 5,\n    seats: 5,\n    previousOwners: 1,\n    description: \"RS Paket, Canton Soundsystem, Matrix LED.\",\n    createdAt: \"2024-11-27T11:20:00Z\",\n  },\n  {\n    id: \"auto-67890123\",\n    title: \"Porsche 911 Carrera S\",\n    year: 2019,\n    mileage: 32000,\n    price: 129000,\n    location: \"Wien\",\n    imageUrl: \"https://images.unsplash.com/photo-1503376780353-7e6692767b70?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-02-10\",\n    fuelType: \"Benzin\",\n    transmission: \"PDK\",\n    power: \"450 PS\",\n    bodyType: \"Coupe\",\n    color: \"Silber Metallic\",\n    doors: 2,\n    seats: 4,\n    previousOwners: 2,\n    description: \"Sport Chrono Paket, Keramik Bremsen, Vollausstattung.\",\n    createdAt: \"2024-11-26T08:30:00Z\",\n  },\n  {\n    id: \"auto-78901234\",\n    title: \"Toyota RAV4 Hybrid AWD\",\n    year: 2022,\n    mileage: 25000,\n    price: 39500,\n    location: \"Klagenfurt\",\n    phone: \"+43 664 7890123\",\n    imageUrl: \"https://images.unsplash.com/photo-1581540222194-0def2dda95b8?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-01-30\",\n    fuelType: \"Hybrid\",\n    transmission: \"CVT\",\n    power: \"222 PS\",\n    bodyType: \"SUV\",\n    color: \"Grün Metallic\",\n    doors: 5,\n    seats: 5,\n    previousOwners: 1,\n    description: \"Style Selection, JBL Sound, Adaptiver Tempomat.\",\n    createdAt: \"2024-11-25T13:00:00Z\",\n  },\n  {\n    id: \"auto-89012345\",\n    title: \"Tesla Model 3 Long Range\",\n    year: 2023,\n    mileage: 18000,\n    price: 42900,\n    location: \"Wien\",\n    imageUrl: \"https://images.unsplash.com/photo-1560958089-b8a1929cea89?w=400&h=400&fit=crop\",\n    expirationDate: \"2025-02-05\",\n    fuelType: \"Elektro\",\n    transmission: \"Automatik\",\n    power: \"491 PS\",\n    bodyType: \"Limousine\",\n    color: \"Weiß\",\n    doors: 4,\n    seats: 5,\n    previousOwners: 1,\n    description: \"Autopilot, Premium Interieur, Supercharger kostenlos.\",\n    createdAt: \"2024-11-24T15:30:00Z\",\n  },\n];\n\nexport const getSortedVehicles = (): Vehicle[] => {\n  return [...mockVehicles].sort(\n    (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n  );\n};\n\nexport const getVehicleById = (id: string): Vehicle | undefined => {\n  return mockVehicles.find((v) => v.id === id);\n};\n\nexport const getSimilarVehicles = (currentId: string): Vehicle[] => {\n  return mockVehicles.filter((v) => v.id !== currentId).slice(0, 4);\n};\n","path":null,"size_bytes":5568,"size_tokens":null},"components/ThemedView.tsx":{"content":"import { View, type ViewProps } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\n\nexport type ThemedViewProps = ViewProps & {\n  lightColor?: string;\n  darkColor?: string;\n};\n\nexport function ThemedView({\n  style,\n  lightColor,\n  darkColor,\n  ...otherProps\n}: ThemedViewProps) {\n  const { theme, isDark } = useTheme();\n\n  const backgroundColor =\n    isDark && darkColor\n      ? darkColor\n      : !isDark && lightColor\n        ? lightColor\n        : theme.backgroundRoot;\n\n  return <View style={[{ backgroundColor }, style]} {...otherProps} />;\n}\n","path":null,"size_bytes":563,"size_tokens":null},"components/VehicleCard.tsx":{"content":"import React from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Alert,\n  Platform,\n  TouchableOpacity,\n} from \"react-native\";\nimport { Image } from \"expo-image\";\nimport { Feather } from \"@expo/vector-icons\";\nimport * as Linking from \"expo-linking\";\nimport * as WebBrowser from \"expo-web-browser\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  WithSpringConfig,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Colors } from \"@/constants/theme\";\nimport { Vehicle } from \"@/services/api\";\n\ninterface VehicleCardProps {\n  vehicle: Vehicle;\n  onCardPress: () => void;\n  isNew?: boolean;\n}\n\nconst springConfig: WithSpringConfig = {\n  damping: 15,\n  mass: 0.3,\n  stiffness: 150,\n  overshootClamping: true,\n  energyThreshold: 0.001,\n};\n\nconst AnimatedView = Animated.createAnimatedComponent(View);\n\nexport function VehicleCard({ vehicle, onCardPress, isNew }: VehicleCardProps) {\n  const { isDark } = useTheme();\n  const scale = useSharedValue(1);\n  const colors = isDark ? Colors.dark : Colors.light;\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    scale.value = withSpring(0.98, springConfig);\n  };\n\n  const handlePressOut = () => {\n    scale.value = withSpring(1, springConfig);\n  };\n\n  const handleImagePress = async () => {\n    const searchQuery = encodeURIComponent(\n      `${vehicle.title} ${vehicle.location} kontakt`\n    );\n    const googleUrl = `https://www.google.com/search?q=${searchQuery}`;\n\n    try {\n      await WebBrowser.openBrowserAsync(googleUrl);\n    } catch (error) {\n      Alert.alert(\"Error\", \"Could not open browser\");\n    }\n  };\n\n  const handleChatPress = async () => {\n    const vehicleId = vehicle.id.replace('wh-', '');\n    const willhabenUrl = vehicle.willhabenUrl || `https://www.willhaben.at/iad/gebrauchtwagen/d/oglasi/${vehicleId}`;\n\n    try {\n      await WebBrowser.openBrowserAsync(willhabenUrl);\n    } catch {\n      Alert.alert(\"Error\", \"Could not open Willhaben\");\n    }\n  };\n\n  const handleMessagePress = async () => {\n    const vehicleId = vehicle.id.replace('wh-', '');\n    const willhabenUrl = vehicle.willhabenUrl || `https://www.willhaben.at/iad/gebrauchtwagen/d/oglasi/${vehicleId}`;\n    try {\n      await WebBrowser.openBrowserAsync(willhabenUrl);\n    } catch {\n      Alert.alert(\"Error\", \"Could not open browser\");\n    }\n  };\n\n  const formatPrice = (price: number | null) => {\n    if (!price) return \"Preis auf Anfrage\";\n    return new Intl.NumberFormat(\"de-AT\", {\n      style: \"currency\",\n      currency: \"EUR\",\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const formatMileage = (mileage: number | null) => {\n    if (!mileage) return \"\";\n    return new Intl.NumberFormat(\"de-AT\").format(mileage) + \" km\";\n  };\n\n  const getMetadata = () => {\n    const parts = [];\n    if (vehicle.year) parts.push(vehicle.year.toString());\n    if (vehicle.mileage) parts.push(formatMileage(vehicle.mileage));\n    if (vehicle.fuelType) parts.push(vehicle.fuelType);\n    return parts.join(\" • \") || vehicle.location;\n  };\n\n  const placeholderImage = \"https://via.placeholder.com/200x200.png?text=Auto\";\n\n  return (\n    <AnimatedView\n      style={[\n        styles.card,\n        {\n          backgroundColor: colors.backgroundDefault,\n          borderColor: isNew ? colors.primary : colors.border,\n          borderWidth: isNew ? 2 : 1,\n        },\n        animatedStyle,\n      ]}\n      accessibilityLabel={`${vehicle.title}, ${vehicle.year || 'Jahr unbekannt'}, ${formatPrice(vehicle.price)}`}\n    >\n      <TouchableOpacity\n        onPress={handleImagePress}\n        onPressIn={handlePressIn}\n        onPressOut={handlePressOut}\n        activeOpacity={0.8}\n        style={styles.imageContainer}\n      >\n        <Image\n          source={{ uri: vehicle.imageUrl || placeholderImage }}\n          style={styles.image}\n          contentFit=\"cover\"\n          transition={200}\n        />\n        {isNew ? (\n          <View style={[styles.newBadge, { backgroundColor: colors.primary }]}>\n            <ThemedText style={styles.newBadgeText}>NEU</ThemedText>\n          </View>\n        ) : null}\n      </TouchableOpacity>\n\n      <View style={styles.contentContainer}>\n        <TouchableOpacity\n          onPress={onCardPress}\n          onPressIn={handlePressIn}\n          onPressOut={handlePressOut}\n          activeOpacity={0.9}\n          style={styles.textContent}\n        >\n          <ThemedText\n            style={[styles.title, { color: colors.text }]}\n            numberOfLines={2}\n          >\n            {vehicle.title}\n          </ThemedText>\n\n          <ThemedText style={[styles.metadata, { color: colors.textSecondary }]}>\n            {getMetadata()}\n          </ThemedText>\n\n          <ThemedText style={[styles.price, { color: colors.primary }]}>\n            {formatPrice(vehicle.price)}\n          </ThemedText>\n        </TouchableOpacity>\n\n        <View style={styles.iconRow}>\n          <TouchableOpacity\n            onPress={handleMessagePress}\n            activeOpacity={0.6}\n            style={[styles.iconButton, { backgroundColor: colors.backgroundSecondary }]}\n          >\n            <Feather name=\"external-link\" size={18} color={colors.textSecondary} />\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            onPress={handleChatPress}\n            activeOpacity={0.6}\n            style={[styles.iconButton, { backgroundColor: colors.backgroundSecondary }]}\n          >\n            <Feather name=\"message-circle\" size={18} color={colors.textSecondary} />\n          </TouchableOpacity>\n        </View>\n      </View>\n    </AnimatedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  card: {\n    flexDirection: \"row\",\n    padding: Spacing.md,\n    borderRadius: BorderRadius.md,\n    ...Platform.select({\n      ios: {\n        shadowColor: \"#000\",\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.08,\n        shadowRadius: 4,\n      },\n      android: {\n        elevation: 2,\n      },\n    }),\n  },\n  imageContainer: {\n    width: 100,\n    height: 100,\n    borderRadius: BorderRadius.sm,\n    overflow: \"hidden\",\n    position: \"relative\",\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  newBadge: {\n    position: \"absolute\",\n    top: 4,\n    left: 4,\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  newBadgeText: {\n    color: \"#FFFFFF\",\n    fontSize: 10,\n    fontWeight: \"700\",\n  },\n  contentContainer: {\n    flex: 1,\n    marginLeft: Spacing.md,\n  },\n  textContent: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: \"600\",\n  },\n  metadata: {\n    fontSize: 14,\n    marginTop: Spacing.xs,\n  },\n  price: {\n    fontSize: 18,\n    fontWeight: \"700\",\n    marginTop: Spacing.xs,\n  },\n  iconRow: {\n    flexDirection: \"row\",\n    gap: Spacing.md,\n    marginTop: Spacing.sm,\n  },\n  iconButton: {\n    width: 36,\n    height: 36,\n    borderRadius: BorderRadius.sm,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n});\n","path":null,"size_bytes":7076,"size_tokens":null},"babel.config.js":{"content":"module.exports = function (api) {\n  api.cache(true);\n  return {\n    presets: [\"babel-preset-expo\"],\n    plugins: [\n      [\n        \"module-resolver\",\n        {\n          root: [\"./\"],\n          alias: {\n            \"@\": \"./\",\n          },\n          extensions: [\".ios.js\", \".android.js\", \".js\", \".ts\", \".tsx\", \".json\"],\n        },\n      ],\n      \"react-native-reanimated/plugin\",\n    ],\n  };\n};\n","path":null,"size_bytes":395,"size_tokens":null},"start-all.js":{"content":"const { spawn } = require('child_process');\nconst path = require('path');\n\nconsole.log('Starting Willhaben scraper server...');\nconst server = spawn('node', ['server/index.js'], {\n  stdio: 'inherit',\n  env: { ...process.env },\n});\n\nserver.on('error', (err) => {\n  console.error('Server error:', err);\n});\n\nsetTimeout(() => {\n  console.log('Starting Expo...');\n  const expo = spawn('npx', ['expo', 'start'], {\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      EXPO_PACKAGER_PROXY_URL: `https://${process.env.REPLIT_DEV_DOMAIN}`,\n      REACT_NATIVE_PACKAGER_HOSTNAME: process.env.REPLIT_DEV_DOMAIN,\n    },\n  });\n\n  expo.on('error', (err) => {\n    console.error('Expo error:', err);\n  });\n}, 3000);\n\nprocess.on('SIGINT', () => {\n  server.kill();\n  process.exit();\n});\n","path":null,"size_bytes":776,"size_tokens":null},"components/Spacer.tsx":{"content":"import { View } from \"react-native\";\n\ntype Props = {\n  width?: number;\n  height?: number;\n};\n\nexport default function Spacer(props: Props) {\n  const width: number = props.width ?? 1;\n  const height: number = props.height ?? 1;\n\n  return (\n    <View\n      style={{\n        width,\n        height,\n      }}\n    />\n  );\n}\n","path":null,"size_bytes":318,"size_tokens":null},"components/ErrorFallback.tsx":{"content":"import React, { useState } from \"react\";\nimport { reloadAppAsync } from \"expo\";\nimport {\n  StyleSheet,\n  View,\n  Pressable,\n  ScrollView,\n  Text,\n  Modal,\n} from \"react-native\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { ThemedView } from \"@/components/ThemedView\";\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { Spacing, BorderRadius, Fonts } from \"@/constants/theme\";\n\nexport type ErrorFallbackProps = {\n  error: Error;\n  resetError: () => void;\n};\n\nexport function ErrorFallback({ error, resetError }: ErrorFallbackProps) {\n  const { theme } = useTheme();\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const handleRestart = async () => {\n    try {\n      await reloadAppAsync();\n    } catch (restartError) {\n      console.error(\"Failed to restart app:\", restartError);\n      resetError();\n    }\n  };\n\n  const formatErrorDetails = (): string => {\n    let details = `Error: ${error.message}\\n\\n`;\n    if (error.stack) {\n      details += `Stack Trace:\\n${error.stack}`;\n    }\n    return details;\n  };\n\n  return (\n    <ThemedView style={styles.container}>\n      {__DEV__ ? (\n        <Pressable\n          onPress={() => setIsModalVisible(true)}\n          style={({ pressed }) => [\n            styles.topButton,\n            {\n              backgroundColor: theme.backgroundDefault,\n              opacity: pressed ? 0.8 : 1,\n            },\n          ]}\n        >\n          <Feather name=\"alert-circle\" size={20} color={theme.text} />\n        </Pressable>\n      ) : null}\n\n      <View style={styles.content}>\n        <ThemedText type=\"h1\" style={styles.title}>\n          Oops! Something went wrong\n        </ThemedText>\n\n        <ThemedText type=\"body\" style={styles.message}>\n          Willhaben Cars encountered an issue. Please restart to continue browsing vehicles.\n        </ThemedText>\n\n        <Pressable\n          onPress={handleRestart}\n          style={({ pressed }) => [\n            styles.button,\n            {\n              backgroundColor: theme.link,\n              opacity: pressed ? 0.9 : 1,\n              transform: [{ scale: pressed ? 0.98 : 1 }],\n            },\n          ]}\n        >\n          <ThemedText\n            type=\"body\"\n            style={[styles.buttonText, { color: theme.buttonText }]}\n          >\n            Restart App\n          </ThemedText>\n        </Pressable>\n      </View>\n\n      {__DEV__ ? (\n        <Modal\n          visible={isModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setIsModalVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <ThemedView style={styles.modalContainer}>\n              <View style={styles.modalHeader}>\n                <ThemedText type=\"h2\" style={styles.modalTitle}>\n                  Error Details\n                </ThemedText>\n                <Pressable\n                  onPress={() => setIsModalVisible(false)}\n                  style={({ pressed }) => [\n                    styles.closeButton,\n                    { opacity: pressed ? 0.6 : 1 },\n                  ]}\n                >\n                  <Feather name=\"x\" size={24} color={theme.text} />\n                </Pressable>\n              </View>\n\n              <ScrollView\n                style={styles.modalScrollView}\n                contentContainerStyle={styles.modalScrollContent}\n                showsVerticalScrollIndicator\n              >\n                <View\n                  style={[\n                    styles.errorContainer,\n                    { backgroundColor: theme.backgroundDefault },\n                  ]}\n                >\n                  <Text\n                    style={[\n                      styles.errorText,\n                      {\n                        color: theme.text,\n                        fontFamily: Fonts?.mono || \"monospace\",\n                      },\n                    ]}\n                    selectable\n                  >\n                    {formatErrorDetails()}\n                  </Text>\n                </View>\n              </ScrollView>\n            </ThemedView>\n          </View>\n        </Modal>\n      ) : null}\n    </ThemedView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: \"100%\",\n    height: \"100%\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: Spacing[\"2xl\"],\n  },\n  content: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    gap: Spacing.lg,\n    width: \"100%\",\n    maxWidth: 600,\n  },\n  title: {\n    textAlign: \"center\",\n    lineHeight: 40,\n  },\n  message: {\n    textAlign: \"center\",\n    opacity: 0.7,\n    lineHeight: 24,\n  },\n  topButton: {\n    position: \"absolute\",\n    top: Spacing[\"2xl\"] + Spacing.lg,\n    right: Spacing.lg,\n    width: 44,\n    height: 44,\n    borderRadius: BorderRadius.md,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    zIndex: 10,\n  },\n  button: {\n    paddingVertical: Spacing.lg,\n    borderRadius: BorderRadius.md,\n    paddingHorizontal: Spacing[\"2xl\"],\n    minWidth: 200,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  buttonText: {\n    fontWeight: \"600\",\n    textAlign: \"center\",\n    fontSize: 16,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n    justifyContent: \"flex-end\",\n  },\n  modalContainer: {\n    width: \"100%\",\n    height: \"90%\",\n    borderTopLeftRadius: BorderRadius.lg,\n    borderTopRightRadius: BorderRadius.lg,\n  },\n  modalHeader: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    paddingHorizontal: Spacing.lg,\n    paddingTop: Spacing.lg,\n    paddingBottom: Spacing.md,\n    borderBottomWidth: 1,\n    borderBottomColor: \"rgba(128, 128, 128, 0.2)\",\n  },\n  modalTitle: {\n    fontWeight: \"600\",\n  },\n  closeButton: {\n    padding: Spacing.xs,\n  },\n  modalScrollView: {\n    flex: 1,\n  },\n  modalScrollContent: {\n    padding: Spacing.lg,\n  },\n  errorContainer: {\n    width: \"100%\",\n    borderRadius: BorderRadius.md,\n    overflow: \"hidden\",\n    padding: Spacing.lg,\n  },\n  errorText: {\n    fontSize: 12,\n    lineHeight: 18,\n    width: \"100%\",\n  },\n});\n","path":null,"size_bytes":6250,"size_tokens":null},"components/ScreenFlatList.tsx":{"content":"import React from \"react\";\nimport { FlatList, FlatListProps, StyleSheet } from \"react-native\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useScreenInsets } from \"@/hooks/useScreenInsets\";\nimport { Spacing } from \"@/constants/theme\";\n\nexport function ScreenFlatList<T>({\n  contentContainerStyle,\n  style,\n  ...flatListProps\n}: FlatListProps<T>) {\n  const { theme } = useTheme();\n  const { paddingTop, paddingBottom, scrollInsetBottom } = useScreenInsets();\n\n  return (\n    <FlatList\n      style={[\n        styles.container,\n        { backgroundColor: theme.backgroundRoot },\n        style,\n      ]}\n      contentContainerStyle={[\n        {\n          paddingTop,\n          paddingBottom,\n        },\n        styles.contentContainer,\n        contentContainerStyle,\n      ]}\n      scrollIndicatorInsets={{ bottom: scrollInsetBottom }}\n      {...flatListProps}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    paddingHorizontal: Spacing.xl,\n  },\n});\n","path":null,"size_bytes":1016,"size_tokens":null},"server/index.js":{"content":"const express = require('express');\nconst cors = require('cors');\nconst scraper = require('./scraper');\n\nconst app = express();\nconst PORT = process.env.PORT || 8082;\n\napp.use(cors());\napp.use(express.json());\n\nconst vehicleCache = new Map();\nconst newVehicleIds = new Set();\nlet lastScrapeTime = null;\nlet isFirstScrape = true;\n\nasync function scrapeAndStore() {\n  try {\n    console.log('Starting scrape...');\n    const scrapedVehicles = await scraper.scrapeWillhaben();\n    console.log(`Scraped ${scrapedVehicles.length} vehicles`);\n\n    let newCount = 0;\n    \n    for (const vehicle of scrapedVehicles) {\n      if (!vehicleCache.has(vehicle.id)) {\n        if (!isFirstScrape) {\n          newVehicleIds.add(vehicle.id);\n          newCount++;\n        }\n        vehicleCache.set(vehicle.id, {\n          ...vehicle,\n          isNew: !isFirstScrape,\n          firstSeenAt: new Date().toISOString(),\n        });\n      }\n    }\n\n    lastScrapeTime = new Date().toISOString();\n    isFirstScrape = false;\n    \n    console.log(`Cache size: ${vehicleCache.size}, New this scrape: ${newCount}`);\n    return newCount;\n  } catch (error) {\n    console.error('Scrape error:', error.message);\n    return 0;\n  }\n}\n\napp.get('/api/vehicles', (req, res) => {\n  const vehicles = Array.from(vehicleCache.values())\n    .sort((a, b) => new Date(b.firstSeenAt) - new Date(a.firstSeenAt))\n    .slice(0, 100);\n  \n  res.json({ vehicles, lastScrapeTime });\n});\n\napp.get('/api/vehicles/new', (req, res) => {\n  const vehicles = Array.from(vehicleCache.values())\n    .filter(v => newVehicleIds.has(v.id))\n    .sort((a, b) => new Date(b.firstSeenAt) - new Date(a.firstSeenAt));\n  \n  res.json({ vehicles, count: vehicles.length });\n});\n\napp.post('/api/vehicles/mark-seen', (req, res) => {\n  for (const id of newVehicleIds) {\n    const vehicle = vehicleCache.get(id);\n    if (vehicle) {\n      vehicle.isNew = false;\n    }\n  }\n  newVehicleIds.clear();\n  res.json({ success: true });\n});\n\napp.post('/api/scrape', async (req, res) => {\n  const newCount = await scrapeAndStore();\n  res.json({ \n    success: true, \n    newCount,\n    totalVehicles: vehicleCache.size,\n    lastScrapeTime \n  });\n});\n\napp.get('/api/health', (req, res) => {\n  res.json({ \n    status: 'ok', \n    lastScrapeTime,\n    totalVehicles: vehicleCache.size,\n    newVehicles: newVehicleIds.size\n  });\n});\n\nasync function startServer() {\n  console.log('Starting Willhaben scraper (no database)...');\n  \n  await scrapeAndStore();\n  \n  setInterval(scrapeAndStore, 30000);\n\n  app.listen(PORT, '0.0.0.0', () => {\n    console.log(`Server running on port ${PORT}`);\n    console.log(`Scraping every 30 seconds...`);\n  });\n}\n\nstartServer().catch(console.error);\n","path":null,"size_bytes":2683,"size_tokens":null},"server/scraper.js":{"content":"const https = require('https');\nconst http = require('http');\n\nfunction fetchPage(url, baseUrl = null) {\n  return new Promise((resolve, reject) => {\n    let fullUrl = url;\n    if (!url.startsWith('http') && baseUrl) {\n      const base = new URL(baseUrl);\n      fullUrl = url.startsWith('/') \n        ? `${base.protocol}//${base.host}${url}`\n        : `${baseUrl}/${url}`;\n    }\n    \n    if (!fullUrl.startsWith('http')) {\n      reject(new Error(`Invalid URL: ${fullUrl}`));\n      return;\n    }\n    \n    const parsedUrl = new URL(fullUrl);\n    const protocol = parsedUrl.protocol === 'https:' ? https : http;\n    \n    const options = {\n      hostname: parsedUrl.hostname,\n      path: parsedUrl.pathname + parsedUrl.search,\n      port: parsedUrl.port || (parsedUrl.protocol === 'https:' ? 443 : 80),\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Accept-Language': 'de-AT,de;q=0.9,en;q=0.8',\n        'Cache-Control': 'no-cache',\n      },\n    };\n\n    protocol.get(options, (res) => {\n      if (res.statusCode === 301 || res.statusCode === 302) {\n        const redirectUrl = res.headers.location;\n        fetchPage(redirectUrl, fullUrl).then(resolve).catch(reject);\n        return;\n      }\n\n      let data = '';\n      res.on('data', (chunk) => (data += chunk));\n      res.on('end', () => resolve(data));\n    }).on('error', reject);\n  });\n}\n\nfunction extractPrice(text) {\n  if (!text) return null;\n  const match = text.replace(/[^\\d]/g, '');\n  return match ? parseInt(match, 10) : null;\n}\n\nfunction extractYear(text) {\n  if (!text) return null;\n  const match = text.match(/\\b(19|20)\\d{2}\\b/);\n  return match ? parseInt(match[0], 10) : null;\n}\n\nfunction extractMileage(text) {\n  if (!text) return null;\n  const match = text.match(/([\\d.]+)\\s*km/i);\n  if (match) {\n    return parseInt(match[1].replace(/\\./g, ''), 10);\n  }\n  return null;\n}\n\nfunction parseVehiclesFromHTML(html) {\n  const vehicles = [];\n  \n  const articleRegex = /<article[^>]*data-testid=\"search-result-entry-header-[^\"]*\"[^>]*>([\\s\\S]*?)<\\/article>/gi;\n  let articleMatch;\n  \n  while ((articleMatch = articleRegex.exec(html)) !== null) {\n    const articleHtml = articleMatch[0];\n    \n    const idMatch = articleHtml.match(/data-testid=\"search-result-entry-header-(\\d+)\"/);\n    const id = idMatch ? idMatch[1] : `wh-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    \n    const titleMatch = articleHtml.match(/<h2[^>]*>([\\s\\S]*?)<\\/h2>/i);\n    let title = '';\n    if (titleMatch) {\n      title = titleMatch[1].replace(/<[^>]+>/g, '').trim();\n    }\n    \n    const priceMatch = articleHtml.match(/€\\s*([\\d.,]+)/);\n    const price = priceMatch ? extractPrice(priceMatch[0]) : null;\n    \n    const imgMatch = articleHtml.match(/<img[^>]*src=\"([^\"]+)\"[^>]*>/i);\n    let imageUrl = imgMatch ? imgMatch[1] : null;\n    if (imageUrl && imageUrl.startsWith('//')) {\n      imageUrl = 'https:' + imageUrl;\n    }\n    \n    const linkMatch = articleHtml.match(/href=\"(\\/iad\\/gebrauchtwagen\\/d\\/[^\"]+)\"/);\n    const willhabenUrl = linkMatch \n      ? `https://www.willhaben.at${linkMatch[1]}`\n      : null;\n    \n    const locationMatch = articleHtml.match(/<span[^>]*>([^<]*(?:Wien|Graz|Linz|Salzburg|Innsbruck|Klagenfurt|St\\.\\s*Pölten|Villach|Wels|Dornbirn|Bregenz)[^<]*)<\\/span>/i);\n    const location = locationMatch ? locationMatch[1].trim() : 'Österreich';\n    \n    const yearMatch = articleHtml.match(/\\b(20[0-2]\\d|19\\d{2})\\b/);\n    const year = yearMatch ? parseInt(yearMatch[0], 10) : null;\n    \n    const mileageMatch = articleHtml.match(/([\\d.]+)\\s*km/i);\n    const mileage = mileageMatch ? parseInt(mileageMatch[1].replace(/\\./g, ''), 10) : null;\n    \n    const fuelMatch = articleHtml.match(/\\b(Benzin|Diesel|Elektro|Hybrid|CNG|LPG)\\b/i);\n    const fuelType = fuelMatch ? fuelMatch[1] : null;\n\n    if (title && title.length > 3) {\n      vehicles.push({\n        id: `wh-${id}`,\n        title,\n        price,\n        year,\n        mileage,\n        location,\n        fuelType,\n        imageUrl,\n        willhabenUrl,\n        phone: null,\n      });\n    }\n  }\n\n  return vehicles;\n}\n\nconst FUEL_TYPE_MAP = {\n  '100001': 'Benzin',\n  '100002': 'Benzin/Elektro',\n  '100003': 'Diesel',\n  '100004': 'Elektro',\n  '100005': 'Erdgas (CNG)',\n  '100006': 'Ethanol',\n  '100007': 'Flüssiggas (LPG)',\n  '100008': 'Hybrid (Benzin/Elektro)',\n  '100009': 'Hybrid (Diesel/Elektro)',\n  '100010': 'Wasserstoff',\n};\n\nfunction parseVehiclesFromJSON(html) {\n  const vehicles = [];\n  \n  try {\n    const scriptMatch = html.match(/<script[^>]*id=\"__NEXT_DATA__\"[^>]*>([\\s\\S]*?)<\\/script>/i);\n    if (scriptMatch) {\n      const jsonData = JSON.parse(scriptMatch[1]);\n      const searchResult = jsonData?.props?.pageProps?.searchResult;\n      \n      if (searchResult?.advertSummaryList?.advertSummary) {\n        for (const ad of searchResult.advertSummaryList.advertSummary) {\n          const attrs = ad.attributes?.attribute || [];\n          \n          const getAttr = (name) => {\n            const attr = attrs.find((a) => a.name === name);\n            return attr?.values?.[0] || null;\n          };\n\n          const priceAttr = getAttr('PRICE/AMOUNT') || getAttr('PRICE');\n          const price = priceAttr ? Math.round(parseFloat(priceAttr)) : null;\n          \n          const yearAttr = getAttr('YEAR_MODEL') || getAttr('YEAR');\n          const year = yearAttr ? parseInt(yearAttr, 10) : null;\n          \n          const mileageAttr = getAttr('MILEAGE');\n          const mileage = mileageAttr ? parseInt(mileageAttr, 10) : null;\n          \n          const location = getAttr('LOCATION') || getAttr('DISTRICT') || getAttr('CITY') || getAttr('COUNTRY') || 'Österreich';\n          \n          const fuelCode = getAttr('ENGINE/FUEL');\n          const fuelType = fuelCode ? (FUEL_TYPE_MAP[fuelCode] || fuelCode) : null;\n          \n          const mmoAttr = getAttr('MMO');\n          let imageUrl = null;\n          if (mmoAttr) {\n            imageUrl = `https://cache.willhaben.at/mmo/${mmoAttr}`;\n          }\n          \n          const seoUrl = getAttr('SEO_URL');\n          const willhabenUrl = seoUrl \n            ? `https://www.willhaben.at/iad/${seoUrl}`\n            : `https://www.willhaben.at/iad/gebrauchtwagen/d/auto/${ad.id}`;\n\n          vehicles.push({\n            id: `wh-${ad.id}`,\n            title: ad.description || getAttr('HEADING') || 'Unknown Vehicle',\n            price,\n            year,\n            mileage,\n            location,\n            fuelType,\n            imageUrl,\n            willhabenUrl,\n            phone: null,\n          });\n        }\n      }\n    }\n  } catch (e) {\n    console.log('JSON parsing failed:', e.message);\n  }\n\n  return vehicles;\n}\n\nasync function scrapeWillhaben() {\n  const url = 'https://www.willhaben.at/iad/gebrauchtwagen/auto/gebrauchtwagenboerse';\n  \n  try {\n    console.log('Fetching Willhaben...');\n    const html = await fetchPage(url);\n    console.log(`Received ${html.length} bytes`);\n    \n    let vehicles = parseVehiclesFromJSON(html);\n    \n    if (vehicles.length === 0) {\n      console.log('Trying HTML parsing...');\n      vehicles = parseVehiclesFromHTML(html);\n    }\n    \n    console.log(`Parsed ${vehicles.length} vehicles`);\n    return vehicles;\n  } catch (error) {\n    console.error('Scraping error:', error.message);\n    return [];\n  }\n}\n\nmodule.exports = { scrapeWillhaben };\n","path":null,"size_bytes":7497,"size_tokens":null},"hooks/useColorScheme.web.ts":{"content":"import { useEffect, useState } from \"react\";\nimport { useColorScheme as useRNColorScheme } from \"react-native\";\n\n/**\n * To support static rendering, this value needs to be re-calculated on the client side for web\n */\nexport function useColorScheme() {\n  const [hasHydrated, setHasHydrated] = useState(false);\n\n  useEffect(() => {\n    setHasHydrated(true);\n  }, []);\n\n  const colorScheme = useRNColorScheme();\n\n  if (hasHydrated) {\n    return colorScheme;\n  }\n\n  return \"light\";\n}\n","path":null,"size_bytes":480,"size_tokens":null},"components/Button.tsx":{"content":"import React, { ReactNode } from \"react\";\nimport { StyleSheet, Pressable, ViewStyle, StyleProp } from \"react-native\";\nimport Animated, {\n  useAnimatedStyle,\n  useSharedValue,\n  withSpring,\n  WithSpringConfig,\n} from \"react-native-reanimated\";\n\nimport { ThemedText } from \"@/components/ThemedText\";\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { BorderRadius, Spacing } from \"@/constants/theme\";\n\ninterface ButtonProps {\n  onPress?: () => void;\n  children: ReactNode;\n  style?: StyleProp<ViewStyle>;\n  disabled?: boolean;\n}\n\nconst springConfig: WithSpringConfig = {\n  damping: 15,\n  mass: 0.3,\n  stiffness: 150,\n  overshootClamping: true,\n  energyThreshold: 0.001,\n};\n\nconst AnimatedPressable = Animated.createAnimatedComponent(Pressable);\n\nexport function Button({\n  onPress,\n  children,\n  style,\n  disabled = false,\n}: ButtonProps) {\n  const { theme } = useTheme();\n  const scale = useSharedValue(1);\n\n  const animatedStyle = useAnimatedStyle(() => ({\n    transform: [{ scale: scale.value }],\n  }));\n\n  const handlePressIn = () => {\n    if (!disabled) {\n      scale.value = withSpring(0.98, springConfig);\n    }\n  };\n\n  const handlePressOut = () => {\n    if (!disabled) {\n      scale.value = withSpring(1, springConfig);\n    }\n  };\n\n  return (\n    <AnimatedPressable\n      onPress={disabled ? undefined : onPress}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      disabled={disabled}\n      style={[\n        styles.button,\n        {\n          backgroundColor: theme.link,\n          opacity: disabled ? 0.5 : 1,\n        },\n        style,\n        animatedStyle,\n      ]}\n    >\n      <ThemedText\n        type=\"body\"\n        style={[styles.buttonText, { color: theme.buttonText }]}\n      >\n        {children}\n      </ThemedText>\n    </AnimatedPressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    height: Spacing.buttonHeight,\n    borderRadius: BorderRadius.full,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  buttonText: {\n    fontWeight: \"600\",\n  },\n});\n","path":null,"size_bytes":2014,"size_tokens":null},"index.js":{"content":"import { registerRootComponent } from \"expo\";\n\nimport App from \"@/App\";\n\nregisterRootComponent(App);\n","path":null,"size_bytes":101,"size_tokens":null},"context/RadioModeContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode } from \"react\";\n\ninterface RadioModeContextType {\n  isRadioModeOn: boolean;\n  toggleRadioMode: () => void;\n}\n\nconst RadioModeContext = createContext<RadioModeContextType | undefined>(undefined);\n\nexport function RadioModeProvider({ children }: { children: ReactNode }) {\n  const [isRadioModeOn, setIsRadioModeOn] = useState(false);\n\n  const toggleRadioMode = () => {\n    setIsRadioModeOn((prev) => !prev);\n  };\n\n  return (\n    <RadioModeContext.Provider value={{ isRadioModeOn, toggleRadioMode }}>\n      {children}\n    </RadioModeContext.Provider>\n  );\n}\n\nexport function useRadioMode() {\n  const context = useContext(RadioModeContext);\n  if (context === undefined) {\n    throw new Error(\"useRadioMode must be used within a RadioModeProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":832,"size_tokens":null},"hooks/useColorScheme.ts":{"content":"export { useColorScheme } from \"react-native\";\n","path":null,"size_bytes":47,"size_tokens":null},"design_guidelines.md":{"content":"# Design Guidelines: Willhaben Car Listings Monitor\n\n## Architecture Decisions\n\n### Authentication\n**No authentication required.** This is a personal utility app with a single user accessing data from a mock API. However, the \"Logout\" button in the top navigation should be implemented as a placeholder that displays an alert: \"No account connected\" when pressed.\n\n### Navigation\n**Stack Navigation** - The app has a single feature area (vehicle browsing) with two primary screens:\n- Main Screen (Vehicle List)\n- Details Screen\n\nNo tab bar is needed. All navigation happens through card interactions and back gestures.\n\n---\n\n## Screen Specifications\n\n### Main Screen — Vehicle List\n\n**Purpose:** Browse the most recent car listings from Willhaben in a scrollable feed.\n\n**Header:**\n- Custom header (not default navigation header)\n- Transparent background\n- Height: 60px\n- Left: \"Logout\" text button (14pt, gray color)\n- Right: Two elements aligned horizontally\n  - Headphone icon (24x24px)\n  - Radio toggle switch (when ON: primary color, OFF: gray)\n- No search bar\n\n**Layout:**\n- Root view: Scrollable vertical list (FlatList)\n- Top inset: `insets.top + 60 (headerHeight) + Spacing.md`\n- Bottom inset: `insets.bottom + Spacing.xl`\n- Card spacing: Spacing.md between cards\n- Horizontal padding: Spacing.lg\n\n**Components:**\n- Vehicle Card (repeating component):\n  - Background: White with subtle border (1px, lightGray)\n  - Border radius: 12px\n  - Padding: Spacing.md\n  - Shadow: subtle (shadowOpacity: 0.08, shadowRadius: 4, shadowOffset: {width: 0, height: 2})\n  - Layout: Horizontal split\n    - Left: Square vehicle image (100x100px, borderRadius: 8px)\n    - Right: Content column\n      - Title (16pt semibold, 2 lines max with ellipsis)\n      - Year + Mileage (14pt regular, gray)\n      - Price (18pt bold, primary color)\n      - Icon row: Message (✉️) and Chat (💬) icons (20x20px, Spacing.md apart)\n\n**Interactions:**\n- Entire card: subtle scale down to 0.98 on press\n- Image area: no additional visual feedback (relies on card press feedback)\n- Icon buttons: scale to 0.9 on press with slight opacity reduction (0.6)\n\n---\n\n### Details Screen\n\n**Purpose:** View full specifications for a selected vehicle.\n\n**Header:**\n- Default navigation header\n- Title: \"Vehicle Details\"\n- Left: Back button (chevron-left icon)\n- Background: White (non-transparent)\n- No right buttons\n\n**Layout:**\n- Root view: Scrollable content (ScrollView)\n- Top inset: Spacing.xl (header is non-transparent)\n- Bottom inset: `insets.bottom + Spacing.xl`\n- Horizontal padding: Spacing.lg\n\n**Components (stacked vertically):**\n1. Hero Image (full width, 250px height, borderRadius: 12px)\n2. Title (24pt bold, Spacing.lg below image)\n3. Price Card:\n   - Background: light primary color (10% opacity)\n   - Padding: Spacing.md\n   - Border radius: 8px\n   - Price text: 22pt bold, primary color\n4. Specifications Grid:\n   - Each spec row: Label (14pt gray) + Value (16pt semibold black)\n   - Spacing between rows: Spacing.sm\n   - Include: Year, Mileage, Expiration Date\n5. Divider line (1px, lightGray, Spacing.lg vertical margins)\n6. \"Similar Vehicles\" Section:\n   - Heading: \"Similar Vehicles\" (18pt semibold)\n   - Horizontal scrollable list of mini cards\n   - Mini card: 160px wide, image + title + price\n   - Spacing between cards: Spacing.md\n\n---\n\n## Design System\n\n### Color Palette\n- **Primary:** #1E40AF (deep blue, for prices and key actions)\n- **Secondary:** #6B7280 (gray, for metadata like year/mileage)\n- **Background:** #F9FAFB (light gray background)\n- **Card Background:** #FFFFFF (white)\n- **Border:** #E5E7EB (light gray)\n- **Text Primary:** #111827 (near black)\n- **Text Secondary:** #6B7280 (gray)\n- **Success:** #10B981 (green, for radio toggle ON state)\n- **Error:** #EF4444 (red, if needed for warnings)\n\n### Typography\n- **Title (Vehicle Card):** 16pt, semibold, textPrimary\n- **Details Title:** 24pt, bold, textPrimary\n- **Price (Card):** 18pt, bold, primary\n- **Price (Details):** 22pt, bold, primary\n- **Metadata:** 14pt, regular, textSecondary\n- **Spec Labels:** 14pt, regular, textSecondary\n- **Spec Values:** 16pt, semibold, textPrimary\n- **Button Text:** 14pt, semibold\n\n### Spacing\n```\nSpacing.xs: 4px\nSpacing.sm: 8px\nSpacing.md: 16px\nSpacing.lg: 24px\nSpacing.xl: 32px\n```\n\n### Visual Design\n- **Icons:** Use Feather icons from @expo/vector-icons for headphone, message, chat, back button\n- **Pressable Feedback:** All touchable elements scale to 0.98 on press with 100ms duration\n- **Shadows:** Use sparingly—only on vehicle cards and floating elements\n- **Border Radius:** Consistent 12px for cards, 8px for images and smaller components\n- **Radio Toggle:** Use React Native Switch component with primary color when ON\n\n### Assets Required\n**Critical Assets:**\n1. **Placeholder car images** (5-6 variations):\n   - Style: Modern, clean car photos or illustrated car silhouettes\n   - Aspect ratio: 1:1 (square) for cards\n   - Resolution: 300x300px minimum\n   - Aesthetic: Professional automotive photography style or minimalist vector illustrations\n   - Examples: sedan, SUV, hatchback, sports car\n\n**Note:** Do NOT use emojis for message/chat icons. Use Feather \"mail\" and \"message-circle\" icons instead.\n\n---\n\n## Accessibility Requirements\n- All touchable elements minimum 44x44pt target size\n- Color contrast ratio 4.5:1 for text\n- Headphone icon and radio toggle should have accessible labels for screen readers\n- Vehicle cards should announce full content: \"Title, Year, Mileage, Price\"\n- Support system font scaling","path":null,"size_bytes":5533,"size_tokens":null},"hooks/useNewCarSound.ts":{"content":"import { useCallback } from 'react';\nimport { Platform } from 'react-native';\n\nexport function useNewCarSound() {\n  const playNewCarSound = useCallback(async () => {\n    try {\n      if (Platform.OS === 'web') {\n        const AudioContextClass = (window as any).AudioContext || (window as any).webkitAudioContext;\n        if (!AudioContextClass) {\n          console.log('Web Audio API not supported');\n          return;\n        }\n        \n        const audioContext = new AudioContextClass();\n        \n        const playTone = (freq: number, startTime: number, duration: number) => {\n          const oscillator = audioContext.createOscillator();\n          const gainNode = audioContext.createGain();\n          \n          oscillator.connect(gainNode);\n          gainNode.connect(audioContext.destination);\n          \n          oscillator.frequency.setValueAtTime(freq, startTime);\n          oscillator.type = 'sine';\n          \n          gainNode.gain.setValueAtTime(0.3, startTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, startTime + duration);\n          \n          oscillator.start(startTime);\n          oscillator.stop(startTime + duration);\n        };\n        \n        const now = audioContext.currentTime;\n        playTone(523.25, now, 0.15);\n        playTone(659.25, now + 0.15, 0.15);\n        playTone(783.99, now + 0.3, 0.2);\n        \n      } else {\n        console.log('Sound notification (native): New car detected!');\n      }\n    } catch (error) {\n      console.log('Sound playback error:', error);\n    }\n  }, []);\n\n  return { playNewCarSound };\n}\n","path":null,"size_bytes":1577,"size_tokens":null},"services/api.ts":{"content":"import { Platform } from 'react-native';\nimport Constants from 'expo-constants';\n\nexport interface Vehicle {\n  id: string;\n  title: string;\n  price: number | null;\n  year: number | null;\n  mileage: number | null;\n  location: string;\n  fuelType: string | null;\n  imageUrl: string | null;\n  willhabenUrl: string | null;\n  phone: string | null;\n  isNew?: boolean;\n  firstSeenAt?: string;\n}\n\nconst getBaseUrl = () => {\n  if (Platform.OS === 'web') {\n    if (typeof window !== 'undefined' && window.location) {\n      const { protocol, hostname } = window.location;\n      if ((hostname.includes('replit') || hostname.includes('riker')) && hostname.includes('-00-')) {\n        const backendHost = hostname.replace('-00-', '-01-');\n        return `${protocol}//${backendHost}`;\n      }\n    }\n    return 'http://localhost:8082';\n  }\n  const hostUri = Constants.expoConfig?.hostUri;\n  if (hostUri) {\n    const host = hostUri.split(':')[0];\n    if (host.includes('-00-')) {\n      return `https://${host.replace('-00-', '-01-')}`;\n    }\n    return `http://${host}:8082`;\n  }\n  return 'http://localhost:8082';\n};\n\nexport async function fetchVehicles(): Promise<{ vehicles: Vehicle[]; lastScrapeTime: string | null }> {\n  try {\n    const response = await fetch(`${getBaseUrl()}/api/vehicles`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch vehicles');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error:', error);\n    return { vehicles: [], lastScrapeTime: null };\n  }\n}\n\nexport async function fetchNewVehicles(): Promise<{ vehicles: Vehicle[]; count: number }> {\n  try {\n    const response = await fetch(`${getBaseUrl()}/api/vehicles/new`);\n    if (!response.ok) {\n      throw new Error('Failed to fetch new vehicles');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error:', error);\n    return { vehicles: [], count: 0 };\n  }\n}\n\nexport async function markVehiclesAsSeen(): Promise<boolean> {\n  try {\n    const response = await fetch(`${getBaseUrl()}/api/vehicles/mark-seen`, {\n      method: 'POST',\n    });\n    return response.ok;\n  } catch (error) {\n    console.error('API Error:', error);\n    return false;\n  }\n}\n\nexport async function triggerScrape(): Promise<{ success: boolean; newCount: number }> {\n  try {\n    const response = await fetch(`${getBaseUrl()}/api/scrape`, {\n      method: 'POST',\n    });\n    if (!response.ok) {\n      throw new Error('Failed to trigger scrape');\n    }\n    return await response.json();\n  } catch (error) {\n    console.error('API Error:', error);\n    return { success: false, newCount: 0 };\n  }\n}\n","path":null,"size_bytes":2612,"size_tokens":null},"eslint.config.js":{"content":"// https://docs.expo.dev/guides/using-eslint/\nconst { defineConfig } = require(\"eslint/config\");\nconst expoConfig = require(\"eslint-config-expo/flat\");\nconst eslintPluginPrettierRecommended = require(\"eslint-plugin-prettier/recommended\");\n\nmodule.exports = defineConfig([\n  expoConfig,\n  eslintPluginPrettierRecommended,\n  {\n    ignores: [\"dist/*\"],\n  },\n]);\n","path":null,"size_bytes":359,"size_tokens":null},"run-all.js":{"content":"const { spawn } = require('child_process');\nconst path = require('path');\n\nconsole.log('Starting backend server...');\nconst backend = spawn('node', ['server/index.js'], {\n  cwd: process.cwd(),\n  stdio: 'inherit',\n});\n\nbackend.on('error', (err) => {\n  console.error('Backend error:', err);\n});\n\nsetTimeout(() => {\n  console.log('Starting Expo frontend...');\n  const expo = spawn('npx', ['expo', 'start'], {\n    cwd: process.cwd(),\n    stdio: 'inherit',\n    env: {\n      ...process.env,\n      EXPO_PACKAGER_PROXY_URL: `https://${process.env.REPLIT_DEV_DOMAIN}`,\n      REACT_NATIVE_PACKAGER_HOSTNAME: process.env.REPLIT_DEV_DOMAIN,\n    },\n  });\n\n  expo.on('error', (err) => {\n    console.error('Expo error:', err);\n  });\n\n  expo.on('close', (code) => {\n    console.log('Expo exited with code:', code);\n    backend.kill();\n    process.exit(code);\n  });\n}, 3000);\n\nprocess.on('SIGINT', () => {\n  backend.kill();\n  process.exit(0);\n});\n\nprocess.on('SIGTERM', () => {\n  backend.kill();\n  process.exit(0);\n});\n","path":null,"size_bytes":1002,"size_tokens":null},"components/ScreenKeyboardAwareScrollView.tsx":{"content":"import { Platform, StyleSheet } from \"react-native\";\nimport {\n  KeyboardAwareScrollView,\n  KeyboardAwareScrollViewProps,\n} from \"react-native-keyboard-controller\";\n\nimport { useTheme } from \"@/hooks/useTheme\";\nimport { useScreenInsets } from \"@/hooks/useScreenInsets\";\nimport { Spacing } from \"@/constants/theme\";\nimport { ScreenScrollView } from \"./ScreenScrollView\";\n\nexport function ScreenKeyboardAwareScrollView({\n  children,\n  contentContainerStyle,\n  style,\n  keyboardShouldPersistTaps = \"handled\",\n  ...scrollViewProps\n}: KeyboardAwareScrollViewProps) {\n  const { theme } = useTheme();\n  const { paddingTop, paddingBottom, scrollInsetBottom } = useScreenInsets();\n\n  /**\n   * KeyboardAwareScrollView isn't compatible with web (it relies on native APIs), so the code falls back to ScreenScrollView on web to avoid runtime errors.\n   */\n  if (Platform.OS === \"web\") {\n    return (\n      <ScreenScrollView\n        style={style}\n        contentContainerStyle={contentContainerStyle}\n        keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n        {...scrollViewProps}\n      >\n        {children}\n      </ScreenScrollView>\n    );\n  }\n\n  return (\n    <KeyboardAwareScrollView\n      style={[\n        styles.container,\n        { backgroundColor: theme.backgroundRoot },\n        style,\n      ]}\n      contentContainerStyle={[\n        {\n          paddingTop,\n          paddingBottom,\n        },\n        styles.contentContainer,\n        contentContainerStyle,\n      ]}\n      scrollIndicatorInsets={{ bottom: scrollInsetBottom }}\n      keyboardShouldPersistTaps={keyboardShouldPersistTaps}\n      {...scrollViewProps}\n    >\n      {children}\n    </KeyboardAwareScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    paddingHorizontal: Spacing.xl,\n  },\n});\n","path":null,"size_bytes":1813,"size_tokens":null},"App.tsx":{"content":"import React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { KeyboardProvider } from \"react-native-keyboard-controller\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\nimport { StatusBar } from \"expo-status-bar\";\n\nimport RootStackNavigator from \"@/navigation/RootStackNavigator\";\nimport { ErrorBoundary } from \"@/components/ErrorBoundary\";\nimport { RadioModeProvider } from \"@/context/RadioModeContext\";\nimport { PhoneProvider } from \"@/context/PhoneContext\";\n\nexport default function App() {\n  return (\n    <ErrorBoundary>\n      <SafeAreaProvider>\n        <GestureHandlerRootView style={styles.root}>\n          <KeyboardProvider>\n            <RadioModeProvider>\n              <PhoneProvider>\n                <NavigationContainer>\n                  <RootStackNavigator />\n                </NavigationContainer>\n              </PhoneProvider>\n            </RadioModeProvider>\n            <StatusBar style=\"auto\" />\n          </KeyboardProvider>\n        </GestureHandlerRootView>\n      </SafeAreaProvider>\n    </ErrorBoundary>\n  );\n}\n\nconst styles = StyleSheet.create({\n  root: {\n    flex: 1,\n  },\n});\n","path":null,"size_bytes":1273,"size_tokens":null}},"version":2}